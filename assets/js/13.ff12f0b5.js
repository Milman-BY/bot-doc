(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{305:function(t,s,_){t.exports=_.p+"assets/img/8-9.3ab48134.jpg"},325:function(t,s,_){"use strict";_.r(s);var v=_(13),a=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_8-c"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-c"}},[t._v("#")]),t._v(" 8. "),s("strong",[t._v("C++")])]),t._v(" "),s("h2",{attrs:{id:"_8-1-редактор-формул"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-редактор-формул"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.1 Редактор формул")])]),t._v(" "),s("p",[t._v("Редактировать формулы на C++ вы можете во вкладке "),s("code",[t._v("Formulas")]),t._v(", которая находится в дереве по пути:")]),t._v(" "),s("ol",[s("li",[t._v('Portfolios -> "Название портфеля" -> Formulas;')]),t._v(" "),s("li",[t._v('Portfolios -> "Название портфеля" -> "Название инструмента" -> Formulas.')])]),t._v(" "),s("p",[t._v("В первом случае будут отображены поля "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-2-32-trade-formula"}},[t._v("Trade formula")]),t._v(", "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-2-34-extra-field-1-и-extra-field-2"}},[t._v("Extra field#1")]),t._v(" и "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-2-34-extra-field-1-и-extra-field-2"}},[t._v("Extra field#2")]),t._v(".\nВо втором "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-9-count-formula"}},[t._v("Count formula")]),t._v(", "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-28-ratio-buy-formula"}},[t._v("Ratio buy formula")]),t._v(", "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-29-ratio-sell-formula"}},[t._v("Ratio sell formula")]),t._v(".")],1),t._v(" "),s("p",[t._v("В редакторе формул существует возможность тестового выполнения выбранной формулы (кнопка "),s("code",[t._v("Test")]),t._v("), при этом на момент вычисления формулы создаётся временная копия портфеля, НО если вы в формуле изменяете значения полей портфеля, и у вас существует портфель с тем же именем, то изменения применятся к этому порфтелю.")]),t._v(" "),s("h2",{attrs:{id:"_8-2-важно"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-важно"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.2 Важно")])]),t._v(" "),s("p",[t._v("При написании формул на языке программирования C++ на код накладываются некоторые ограничения:")]),t._v(" "),s("ul",[s("li",[t._v("Вы пишете только тело соответствующих функций, все функции должны возвращать значение типа "),s("code",[t._v("double")]),t._v(";")]),t._v(" "),s("li",[t._v("Запрещено использование некоторых символов и слов: "),s("code",[t._v("\\001")]),t._v(", "),s("code",[t._v("#nl")]),t._v(", "),s("code",[t._v("#tab")]),t._v(";")]),t._v(" "),s("li",[t._v("Вы можете получить доступ к любому портфелю робота, к инструменту портфеля робота, а также к инструменту биржи, который фигурирует хотя бы в одном из ваших порфтелей;")]),t._v(" "),s("li",[t._v('Вы можете изменять значения некоторых полей порфтелей и инструментов портфелей. При изменении занчений каких-то полей, вы можете "сломать" работу штатного алгоритма робота, имейте это в виду. В связи с этим для экстренного отключения торговли и выключения всех расчётов по формулам в меню действий с портфелями предусмотрен пункт '),s("code",[t._v("Stop formulas")]),t._v(";")]),t._v(" "),s("li",[t._v("Портфель (структура "),s("code",[t._v("portfolio")]),t._v(") содержит методы "),s("code",[t._v("data()")]),t._v(" и "),s("code",[t._v("extra()")]),t._v(" которые позволяют получить доступ к словарям, в которые можно сохранять данные между вызовами формул.")])]),t._v(" "),s("p",[s("strong",[t._v("Важно:")]),t._v(" если значение поля какой-либо бумаги еще не было получено с биржи или для бумаги с данной биржи нельзя получить значение этого поля, то вы получите 0. Нужно понимать что, например, на пустом стакане вы можете получить 0 в качестве цены бида или оффера, поэтому всегда проверяйте значения на равенство нулю в тех ситуациях, где это критично (например, при делении или при нахождении среднего арифметического бида и оффера).")]),t._v(" "),s("p",[s("strong",[t._v("Важно:")]),t._v(" рекомендуется пользоваться именно даннйо версией "),s("code",[t._v("API")]),t._v(" формул, т.к. она дает больше возможностей и быстрее работает.")]),t._v(" "),s("h2",{attrs:{id:"_8-3-доступ-к-биржевым-данным-по-финансовым-инструментам"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-доступ-к-биржевым-данным-по-финансовым-инструментам"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.3. Доступ к биржевым данным по финансовым инструментам")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Функция")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("struct security get_security(const std::string& s)")]),t._v(" "),s("td",[t._v("получить инструмент по его "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-1-seckey"}},[t._v("SecKey")]),t._v(" s")],1)]),t._v(" "),s("tr",[s("td",[t._v("struct security get_security(const char* s)")]),t._v(" "),s("td",[t._v("получить инструмент по его "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-1-seckey"}},[t._v("SecKey")]),t._v(" s")],1)]),t._v(" "),s("tr",[s("td",[t._v("struct security get_security()")]),t._v(" "),s("td",[t._v("получить инструмент, соответствующий главной бумаге текущего портфеля")])]),t._v(" "),s("tr",[s("td",[t._v("struct security get_security(const security_fields& sf)")]),t._v(" "),s("td",[t._v("получить инструмент, соответствующий заданной бумаге портфеля")])])])]),t._v(" "),s("p",[t._v("Методы "),s("code",[t._v("security")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("double theor_price()")]),t._v(" "),s("td",[t._v("расчетная цена, есть только для опционов")])]),t._v(" "),s("tr",[s("td",[t._v("double yield_sell()")]),t._v(" "),s("td",[t._v("доходность, рассчитанная по офферу")])]),t._v(" "),s("tr",[s("td",[t._v("double yield_buy()")]),t._v(" "),s("td",[t._v("доходность, рассчитанная по биду")])]),t._v(" "),s("tr",[s("td",[t._v("double bid()")]),t._v(" "),s("td",[t._v("лучшая цена на покупку")])]),t._v(" "),s("tr",[s("td",[t._v("double offer()")]),t._v(" "),s("td",[t._v("лучшая цена на продажу")])]),t._v(" "),s("tr",[s("td",[t._v("double exp_date()")]),t._v(" "),s("td",[t._v("дата экспирации, в формате epoch")])]),t._v(" "),s("tr",[s("td",[t._v("double strike()")]),t._v(" "),s("td",[t._v("цена страйк, есть только у опционов")])]),t._v(" "),s("tr",[s("td",[s("s",[t._v("long long offer_depth()")])]),t._v(" "),s("td",[t._v("объем оффера в лотах (устарел, используйте "),s("a",{attrs:{href:"#__amount_offer__"}},[t._v("amount_offer")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[s("s",[t._v("long long bid_depth()")])]),t._v(" "),s("td",[t._v("объем бида в лотах (устарел, используйте "),s("a",{attrs:{href:"#__amount_bid__"}},[t._v("amount_bid")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{name:"__amount_offer__"}}),t._v("long long amount_offer()")]),t._v(" "),s("td",[t._v("объем оффера в лотах")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{name:"__amount_bid__"}}),t._v("long long amount_bid()")]),t._v(" "),s("td",[t._v("объем бида в лотах")])]),t._v(" "),s("tr",[s("td",[t._v("double limit_up()")]),t._v(" "),s("td",[t._v("разрешенный верхний лимит цены")])]),t._v(" "),s("tr",[s("td",[t._v("double limit_down()")]),t._v(" "),s("td",[t._v("разрешенный нижний лимит цены")])]),t._v(" "),s("tr",[s("td",[t._v("int trading_status()")]),t._v(" "),s("td",[t._v("статус торгуемости бумаги на бирже (битовая маска, возможные взведенные биты "),s("a",{attrs:{href:"#__TRADING_CAN_PLACE__"}},[t._v("TRADING_CAN_PLACE")]),t._v(" и "),s("a",{attrs:{href:"#__TRADING_CAN_CANCEL__"}},[t._v("TRADING_CAN_CANCEL")]),t._v(", "),s("a",{attrs:{href:"#__sec_status_check__"}},[t._v("пример")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("int conn_online()")]),t._v(" "),s("td",[t._v("стауст активности маркет-дата подключения в роботе (битовая маска, возможные взведенные биты "),s("a",{attrs:{href:"#__MARKET_DATA_BESTS_ONLINE__"}},[t._v("MARKET_DATA_BESTS_ONLINE")]),t._v(" и "),s("a",{attrs:{href:"#__MARKET_DATA_OB_ONLINE__"}},[t._v("MARKET_DATA_OB_ONLINE")]),t._v(", "),s("a",{attrs:{href:"#__sec_status_check__"}},[t._v("пример")]),t._v(")")])]),t._v(" "),s("tr",[s("td",[t._v("double min_step()")]),t._v(" "),s("td",[t._v("минимальный шаг цены")])]),t._v(" "),s("tr",[s("td",[t._v("double lot_round()")]),t._v(" "),s("td",[t._v("количество ценных бумаг в одном стандартном лоте")])]),t._v(" "),s("tr",[s("td",[t._v("double funding_rate()")]),t._v(" "),s("td",[t._v("ставка фондирования")])]),t._v(" "),s("tr",[s("td",[t._v("long long funding_time()")]),t._v(" "),s("td",[t._v("время следующего фондирования в формате epoch")])]),t._v(" "),s("tr",[s("td",[t._v("const spb_commons& spb_common()")]),t._v(" "),s("td",[t._v("структура с полями, описанными ниже")])]),t._v(" "),s("tr",[s("td",[t._v("order_book orderbook()")]),t._v(" "),s("td",[t._v("структура с методами, описанными ниже")])])])]),t._v(" "),s("p",[t._v("Поля "),s("code",[t._v("spb_commons")]),t._v(" (названия и описания взяты из документации "),s("a",{attrs:{href:"https://ftp.spbexchange.ru/TS/DOCS/MDbinary.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("СПб биржи"),s("OutboundLink")],1),t._v("):")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Название")]),t._v(" "),s("th",[t._v("Тип")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("price_last")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("цена последней сделки")])]),t._v(" "),s("tr",[s("td",[t._v("price_open")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("цена первой сделки за сессию")])]),t._v(" "),s("tr",[s("td",[t._v("price_close")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("официальная цена закрытия")])]),t._v(" "),s("tr",[s("td",[t._v("price_high")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("сделка с максимальной ценой")])]),t._v(" "),s("tr",[s("td",[t._v("price_low")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("сделка с минимальной ценой")])]),t._v(" "),s("tr",[s("td",[t._v("price_auction_close_prev")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("цена аукциона закрытия предыдущего дня")])]),t._v(" "),s("tr",[s("td",[t._v("price_halt")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("цена для определения приостановок")])]),t._v(" "),s("tr",[s("td",[t._v("price_official_min_time")]),t._v(" "),s("td",[t._v("long long")]),t._v(" "),s("td",[t._v("время последнего изменения минимальной текущей цены")])]),t._v(" "),s("tr",[s("td",[t._v("price_indicative")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("текущая цена рынка")])]),t._v(" "),s("tr",[s("td",[t._v("price_close_prev")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("официальная цена закрытия предыдущего дня")])]),t._v(" "),s("tr",[s("td",[t._v("price_official")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("официальная цена онлайн (текущая цена)")])]),t._v(" "),s("tr",[s("td",[t._v("price_vwap_day_prev")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("средневзвешенная цена основной сессии предыдущего дня")])]),t._v(" "),s("tr",[s("td",[t._v("price_vwap_day")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("средневзвешенная цена основной сессии текущего дня")])]),t._v(" "),s("tr",[s("td",[t._v("price_current")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("текущая котировка")])]),t._v(" "),s("tr",[s("td",[t._v("price_average")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("средневзвешенная цена")])]),t._v(" "),s("tr",[s("td",[t._v("time_last")]),t._v(" "),s("td",[t._v("long long")]),t._v(" "),s("td",[t._v("время последней сделки")])]),t._v(" "),s("tr",[s("td",[t._v("price_prev_period_close")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("цена последней сделки предыдущего дня")])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"#__Example1__"}},[s("em",[t._v("Пример 1:")])]),t._v(" Пример доступа к полям структуры "),s("code",[t._v("spb_commons")]),t._v(".")]),t._v(" "),s("p",[t._v("Методы "),s("code",[t._v("order_book")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("bool is_available()")]),t._v(" "),s("td",[t._v("доступен ли в данный момент для данной бумаги стакан")])]),t._v(" "),s("tr",[s("td",[t._v("bool has_next_bid()")]),t._v(" "),s("td",[t._v("есть ли еще бид в списке бидов")])]),t._v(" "),s("tr",[s("td",[t._v("bool has_next_offer()")]),t._v(" "),s("td",[t._v("есть ли еще оффер в списке офферов")])]),t._v(" "),s("tr",[s("td",[t._v("std::pair next_bid()")]),t._v(" "),s("td",[t._v("получить текущий бид в формате пара: цена + объем (если его нет, вы получите исключение std::out_of_range) и передвинуть указатель на следующий бид в списке")])]),t._v(" "),s("tr",[s("td",[t._v("std::pair next_offer()")]),t._v(" "),s("td",[t._v("получить текущий оффер в формате пара: цена + объем (если его нет, вы получите исключение std::out_of_range) и передвинуть указатель на следующий оффер в списке")])])])]),t._v(" "),s("p",[t._v("По своей сути "),s("code",[t._v("order_book")]),t._v(" является итератором сразу для двух списков: бидов и офферов, оба списка проходятся в порядке от лучшей цены в сторону худших. Вы можете получить только следующую цену в списке, если нужно вернуться к предыдущей - сохраняйте ее или получите "),s("code",[t._v("order_book")]),t._v(" заново.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://fkviking.github.io/bot-doc/docs/08-c-api.html#_8-8-%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0-%D0%BA-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%B0%D0%BC-%D0%BF%D0%BE%D1%80%D1%82%D1%84%D0%B5%D0%BB%D1%8F-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0-%D1%81%D0%B4%D0%B5%D0%BB%D0%BA%D0%B8-%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D0%B8",target:"_blank",rel:"noopener noreferrer"}},[s("em",[t._v("Пример:")]),s("OutboundLink")],1),t._v(" использования методов структуры "),s("code",[t._v("order_book")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"_8-4-доступ-и-изменение-полеи-инструмента-портфеля"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-доступ-и-изменение-полеи-инструмента-портфеля"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.4. Доступ и изменение полей инструмента портфеля")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Функция")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("struct security_fields get_security_fields(const std::string& p, const std::string& s)")]),t._v(" "),s("td",[t._v("получить бумагу портфеля с именем p с "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-1-seckey"}},[t._v("SecKey 5.3.1.")]),t._v(" s")],1)]),t._v(" "),s("tr",[s("td",[t._v("struct security_fields get_security_fields()")]),t._v(" "),s("td",[t._v("получить главную бумагу текущего портфеля")])]),t._v(" "),s("tr",[s("td",[t._v("struct security_fields get_security_fields(const std::string& s)")]),t._v(" "),s("td",[t._v("получить бумагу текущего портфеля с "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-1-seckey"}},[t._v("SecKey 5.3.1.")]),t._v(" s")],1)])])]),t._v(" "),s("p",[t._v("Методы "),s("code",[t._v("security_fields")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("order_pool orders()")]),t._v(" "),s("td",[t._v("получить пул заявок")])]),t._v(" "),s("tr",[s("td",[t._v("long long sec_type()")]),t._v(" "),s("td",[t._v('получить "Exchange" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("std::string sec_key()")]),t._v(" "),s("td",[t._v('получить "SecKey" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int put()")]),t._v(" "),s("td",[t._v('получить "Put" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long pos()")]),t._v(" "),s("td",[t._v('получить "Curpos" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long count()")]),t._v(" "),s("td",[t._v('получить "Count" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int depth_ob()")]),t._v(" "),s("td",[t._v('получить "Depth OB" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int ob_c_p_t()")]),t._v(" "),s("td",[t._v('получить "Calc price OB" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int ob_t_p_t()")]),t._v(" "),s("td",[t._v('получить "Trading price OB" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int decimals()")]),t._v(" "),s("td",[t._v('получить "Decimals" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double d_pg()")]),t._v(" "),s("td",[t._v('получить "date pagination" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("std::string client_code()")]),t._v(" "),s("td",[t._v('получить "Client code" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool is_first()")]),t._v(" "),s("td",[t._v('получить "Is first" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int on_buy()")]),t._v(" "),s("td",[t._v('получить "On buy" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int leverage()")]),t._v(" "),s("td",[t._v('получить "Leverage" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("std::string sec_board()")]),t._v(" "),s("td",[t._v('получить "SecBoard" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("std::string sec_code()")]),t._v(" "),s("td",[t._v('получить "SecCode" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int count_type()")]),t._v(" "),s("td",[t._v('получить "Count type" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double k()")]),t._v(" "),s("td",[t._v('получить "k" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool sle()")]),t._v(" "),s("td",[t._v('получить "SLE" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double sl()")]),t._v(" "),s("td",[t._v('получить "SL" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double tp()")]),t._v(" "),s("td",[t._v('получить "TP" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double k_sl()")]),t._v(" "),s("td",[t._v('получить "k_sl" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool te()")]),t._v(" "),s("td",[t._v('получить "TE" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int timer()")]),t._v(" "),s("td",[t._v('получить "Timer" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int ratio_sign()")]),t._v(" "),s("td",[t._v('получить "Ratio sign" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int ratio_type()")]),t._v(" "),s("td",[t._v('получить "Ratio type" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double percent_of_quantity()")]),t._v(" "),s("td",[t._v('получить "Percent of quantity" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double fin_res_mult()")]),t._v(" "),s("td",[t._v('получить "Fin res multiplier" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int comission_sign()")]),t._v(" "),s("td",[t._v('получить "Commission type" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double comission()")]),t._v(" "),s("td",[t._v('получить "Commission" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool mm()")]),t._v(" "),s("td",[t._v('получить "MM" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool maker()")]),t._v(" "),s("td",[t._v('получить "Only maker" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool move_limits()")]),t._v(" "),s("td",[t._v('получить "FUT move limits" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool move_limits1()")]),t._v(" "),s("td",[t._v('получить "SPOT move limits" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int depth_ob()")]),t._v(" "),s("td",[t._v('получить "Depth OB" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int ob_c_p_t()")]),t._v(" "),s("td",[t._v('получить "Calc price OB" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int ob_t_p_t()")]),t._v(" "),s("td",[t._v('получить "Trading price OB" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double mc_level_to0()")]),t._v(" "),s("td",[t._v('получить "Level to0" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double mc_level_close()")]),t._v(" "),s("td",[t._v('получить "Level close" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long max_trans_musec()")]),t._v(" "),s("td",[t._v('получить "Max trans time" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long ban_period()")]),t._v(" "),s("td",[t._v('получить "Ban period" инструмента портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("void set_count(long long v)")]),t._v(" "),s("td",[t._v('изменить "Count" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_depth_ob(int v)")]),t._v(" "),s("td",[t._v('изменить "Depth OB" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_ob_c_p_t(int v)")]),t._v(" "),s("td",[t._v('изменить "Calc price OB" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_ob_t_p_t(int v)")]),t._v(" "),s("td",[t._v('изменить "Trading price OB" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_decimals(int v)")]),t._v(" "),s("td",[t._v('изменить "Decimals" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_client_code(std::string v)")]),t._v(" "),s("td",[t._v('изменить "Client code" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_on_buy(int v)")]),t._v(" "),s("td",[t._v('изменить "On buy" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_leverage(int v)")]),t._v(" "),s("td",[t._v('изменить "Leverage" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_count_type(int v)")]),t._v(" "),s("td",[t._v('изменить "Count type" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_k(double v)")]),t._v(" "),s("td",[t._v('изменить "k" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_sle(bool v)")]),t._v(" "),s("td",[t._v('изменить "SLE" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_sl(double v)")]),t._v(" "),s("td",[t._v('изменить "SL" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_tp(double v)")]),t._v(" "),s("td",[t._v('изменить "TP" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_k_sl(double v)")]),t._v(" "),s("td",[t._v('изменить "k_sl" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_te(bool v)")]),t._v(" "),s("td",[t._v('изменить "TE" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_timer(int v)")]),t._v(" "),s("td",[t._v('изменить "Timer" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_ratio_sign(int v)")]),t._v(" "),s("td",[t._v('изменить "Ratio sign" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_ratio_type(int v)")]),t._v(" "),s("td",[t._v('изменить "Ratio type" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_percent_of_quantity(double v)")]),t._v(" "),s("td",[t._v('изменить "Percent of quantity" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_fin_res_mult(double v)")]),t._v(" "),s("td",[t._v('изменить "Fin res multiplier" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_comission_sign(int v)")]),t._v(" "),s("td",[t._v('изменить "Commission type" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_comission(double v)")]),t._v(" "),s("td",[t._v('изменить "Commission" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_mm(bool v)")]),t._v(" "),s("td",[t._v('изменить "MM" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_maker(bool v)")]),t._v(" "),s("td",[t._v('изменить "Only maker" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_move_limits(bool v)")]),t._v(" "),s("td",[t._v('изменить "FUT move limits" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_move_limits1(bool v)")]),t._v(" "),s("td",[t._v('изменить "SPOT move limits" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_depth_ob(int v)")]),t._v(" "),s("td",[t._v('изменить "Depth OB" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_ob_c_p_t(int v)")]),t._v(" "),s("td",[t._v('изменить "Calc price OB" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_ob_t_p_t(int v)")]),t._v(" "),s("td",[t._v('изменить "Trading price OB" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_mc_level_to0(double v)")]),t._v(" "),s("td",[t._v('изменить "Level to0" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_mc_level_close(double v)")]),t._v(" "),s("td",[t._v('изменить "Level close" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_max_trans_musec(long long v)")]),t._v(" "),s("td",[t._v('изменить "Max trans time" инструмента портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_ban_period(long long v)")]),t._v(" "),s("td",[t._v('изменить "Ban period" инструмента портфеля на значение v')])])])]),t._v(" "),s("p",[t._v("Методы "),s("code",[t._v("order_pool")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("bool has_next()")]),t._v(" "),s("td",[t._v("есть ли еще заявка в списке заявок")])]),t._v(" "),s("tr",[s("td",[t._v("order_item next()")]),t._v(" "),s("td",[t._v("получить текущую заявку (если ее нет, вы получите исключение std::out_of_range) и передвинуть указатель на следующую заявку в списке")])])])]),t._v(" "),s("p",[t._v("По своей сути "),s("code",[t._v("order_pool")]),t._v(" является итератором для списка заявок бумаги портфеля робота. Вы можете получить только следующую заявку в списке, если нужно вернуться к предыдущей - сохраняйте ее или получите "),s("code",[t._v("order_pool")]),t._v(" заново.")]),t._v(" "),s("p",[t._v("Поля "),s("code",[t._v("order_item")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Название")]),t._v(" "),s("th",[t._v("Тип")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("price")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("цена")])]),t._v(" "),s("tr",[s("td",[t._v("amount")]),t._v(" "),s("td",[t._v("long long")]),t._v(" "),s("td",[t._v("количество")])]),t._v(" "),s("tr",[s("td",[t._v("amount_rest")]),t._v(" "),s("td",[t._v("long long")]),t._v(" "),s("td",[t._v("остаток")])]),t._v(" "),s("tr",[s("td",[t._v("dir")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("направление")])]),t._v(" "),s("tr",[s("td",[t._v("status")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("статус")])])])]),t._v(" "),s("p",[s("code",[t._v("order_item")]),t._v(" является заявкой робота, возможные значения полей "),s("code",[t._v("dir")]),t._v(" и "),s("code",[t._v("status")]),t._v(" описаны в константах.")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://fkviking.github.io/bot-doc/docs/08-c-api.html#_8-8-%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B-%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0-%D0%BA-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%B0%D0%BC-%D0%BF%D0%BE%D1%80%D1%82%D1%84%D0%B5%D0%BB%D1%8F-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0-%D1%81%D0%B4%D0%B5%D0%BB%D0%BA%D0%B8-%D0%BF%D0%BE%D0%B7%D0%B8%D1%86%D0%B8%D0%B8",target:"_blank",rel:"noopener noreferrer"}},[s("em",[t._v("Пример:")]),s("OutboundLink")],1),t._v(" использования структур "),s("code",[t._v("order_pool")]),t._v(" и "),s("code",[t._v("order_item")])]),t._v(" "),s("h2",{attrs:{id:"_8-5-доступ-и-изменение-полеи-портфеля"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-доступ-и-изменение-полеи-портфеля"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.5. Доступ и изменение полей портфеля")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Функция")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("struct portfolio get_portfolio(const std::string& p)")]),t._v(" "),s("td",[t._v("получить портфель c именем p")])]),t._v(" "),s("tr",[s("td",[t._v("struct portfolio get_portfolio()")]),t._v(" "),s("td",[t._v("получить текущий портфель")])])])]),t._v(" "),s("p",[t._v("Методы "),s("code",[t._v("portfolio")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("deal_item deal(const std::string& s)")]),t._v(" "),s("td",[t._v("получить сделку по бумаге c SecKey s (доступно только в Trade formula, т.е. на момент совершения сделки)")])]),t._v(" "),s("tr",[s("td",[t._v("struct security_fields security_field(const std::string& s)")]),t._v(" "),s("td",[t._v("получить бумагу данного портфеля с SecKey s")])]),t._v(" "),s("tr",[s("td",[t._v("struct security_fields security_field()")]),t._v(" "),s("td",[t._v("получить главную бумагу текущего портфеля")])]),t._v(" "),s("tr",[s("td",[t._v("std::map<std::string, double>& data()")]),t._v(" "),s("td",[t._v("словарь для сохранения пользовательских значений, НЕ будет сохранен при выключении робота")])]),t._v(" "),s("tr",[s("td",[t._v("dict_double& extra()")]),t._v(" "),s("td",[t._v("объект для сохранения пользовательских значений, будет сохранен при выключении робота")])]),t._v(" "),s("tr",[s("td",[t._v("std::string name()")]),t._v(" "),s("td",[t._v('получить "Name" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int decimals()")]),t._v(" "),s("td",[t._v('получить "Decimals" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool tt_only_stop()")]),t._v(" "),s("td",[t._v('получить "Timetable only stop" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("std::string comment()")]),t._v(" "),s("td",[t._v('получить "Comment" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool re_sell()")]),t._v(" "),s("td",[t._v('получить "re_sell" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool re_buy()")]),t._v(" "),s("td",[t._v('получить "re_buy" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool use_tt()")]),t._v(" "),s("td",[t._v('получить "Use timetable" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int portfolio_type()")]),t._v(" "),s("td",[t._v('получить "Type" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long v_in_l()")]),t._v(" "),s("td",[t._v('получить "v_in_left" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long v_in_r()")]),t._v(" "),s("td",[t._v('получить "v_in_right" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long v_out_l()")]),t._v(" "),s("td",[t._v('получить "v_out_left" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long v_out_r()")]),t._v(" "),s("td",[t._v('получить "v_out_right" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long v_min()")]),t._v(" "),s("td",[t._v('получить "v_min" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long v_max()")]),t._v(" "),s("td",[t._v('получить "v_max" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double k()")]),t._v(" "),s("td",[t._v('получить "K" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double k1()")]),t._v(" "),s("td",[t._v('получить "K1" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double k2()")]),t._v(" "),s("td",[t._v('получить "K2" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double tp()")]),t._v(" "),s("td",[t._v('получить "TP" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool equal_prices()")]),t._v(" "),s("td",[t._v('получить "Equal prices" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool always_limits_timer()")]),t._v(" "),s("td",[t._v('получить "Always timer" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double lim_s()")]),t._v(" "),s("td",[t._v('получить "Lim_Sell" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double lim_b()")]),t._v(" "),s("td",[t._v('получить "Lim_Buy" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double delta()")]),t._v(" "),s("td",[t._v('получить "Delta" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double first_delta()")]),t._v(" "),s("td",[t._v('получить "First delta" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long mkt_volume()")]),t._v(" "),s("td",[t._v('получить "Market volume" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int type_trade()")]),t._v(" "),s("td",[t._v('получить "Type trade" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int price_type()")]),t._v(" "),s("td",[t._v('получить "Type price" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool simply_first()")]),t._v(" "),s("td",[t._v('получить "Simply first" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool quote()")]),t._v(" "),s("td",[t._v('получить "Quote" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double percent()")]),t._v(" "),s("td",[t._v('получить "Percent" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int timer()")]),t._v(" "),s("td",[t._v('получить "Limits timer" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool to0()")]),t._v(" "),s("td",[t._v('получить "To0" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("bool virtual_0_pos()")]),t._v(" "),s("td",[t._v('получить "Virt 0 pos" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double opened()")]),t._v(" "),s("td",[t._v('получить "Opened" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double opened_comission()")]),t._v(" "),s("td",[t._v('получить "Commission sum" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double fin_res_wo_c()")]),t._v(" "),s("td",[t._v('получить "Fin res wo C" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double fin_res()")]),t._v(" "),s("td",[t._v('получить "Fin res" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long pos()")]),t._v(" "),s("td",[t._v('получить "Pos" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int n_perc_fill()")]),t._v(" "),s("td",[t._v('получить "n_perc_fill" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int max_not_hedged()")]),t._v(" "),s("td",[t._v('получить "Max not hedged" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double return_first()")]),t._v(" "),s("td",[t._v('получить "Return first" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double price_check()")]),t._v(" "),s("td",[t._v('получить "Price check" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("int hedge_after()")]),t._v(" "),s("td",[t._v('получить "Hedge (sec)" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("long long overlay()")]),t._v(" "),s("td",[t._v('получить "Overlay" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double ext_field1()")]),t._v(" "),s("td",[t._v('получить "Extra field#1" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double ext_field2()")]),t._v(" "),s("td",[t._v('получить "Extra field#2" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double sell()")]),t._v(" "),s("td",[t._v('получить "Sell" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double buy()")]),t._v(" "),s("td",[t._v('получить "Buy" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double price_s()")]),t._v(" "),s("td",[t._v('получить "Price_s" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("double price_b()")]),t._v(" "),s("td",[t._v('получить "Price_b" портфеля')])]),t._v(" "),s("tr",[s("td",[t._v("void set_decimals(int v)")]),t._v(" "),s("td",[t._v('изменить "Decimals" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_tt_only_stop(bool v)")]),t._v(" "),s("td",[t._v('изменить "Timetable only stop" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_comment(std::string v)")]),t._v(" "),s("td",[t._v('изменить "Comment" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_re_sell(bool v)")]),t._v(" "),s("td",[t._v('изменить "re_sell" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_re_buy(bool v)")]),t._v(" "),s("td",[t._v('изменить "re_buy" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_use_tt(bool v)")]),t._v(" "),s("td",[t._v('изменить "Use timetable" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_portfolio_type(int v)")]),t._v(" "),s("td",[t._v('изменить "Type" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_v_in_l(long long v)")]),t._v(" "),s("td",[t._v('изменить "v_in_left" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_v_in_r(long long v)")]),t._v(" "),s("td",[t._v('изменить "v_in_right" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_v_out_l(long long v)")]),t._v(" "),s("td",[t._v('изменить "v_out_left" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_v_out_r(long long v)")]),t._v(" "),s("td",[t._v('изменить "v_out_right" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_v_min(long long v)")]),t._v(" "),s("td",[t._v('изменить "v_min" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_v_max(long long v)")]),t._v(" "),s("td",[t._v('изменить "v_max" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_k(double v)")]),t._v(" "),s("td",[t._v('изменить "K" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_k1(double v)")]),t._v(" "),s("td",[t._v('изменить "K1" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_k2(double v)")]),t._v(" "),s("td",[t._v('изменить "K2" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_tp(double v)")]),t._v(" "),s("td",[t._v('изменить "TP" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_equal_prices(bool v)")]),t._v(" "),s("td",[t._v('изменить "Equal prices" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_always_limits_timer(bool v)")]),t._v(" "),s("td",[t._v('изменить "Always timer" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_lim_s(double v)")]),t._v(" "),s("td",[t._v('изменить "Lim_Sell" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_lim_b(double v)")]),t._v(" "),s("td",[t._v('изменить "Lim_Buy" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_delta(double v)")]),t._v(" "),s("td",[t._v('изменить "Delta" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_first_delta(double v)")]),t._v(" "),s("td",[t._v('изменить "First delta" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_mkt_volume(long long v)")]),t._v(" "),s("td",[t._v('изменить "Market volume" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_type_trade(int v)")]),t._v(" "),s("td",[t._v('изменить "Type trade" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_price_type(int v)")]),t._v(" "),s("td",[t._v('изменить "Type price" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_simply_first(bool v)")]),t._v(" "),s("td",[t._v('изменить "Simply first" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_quote(bool v)")]),t._v(" "),s("td",[t._v('изменить "Quote" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_percent(double v)")]),t._v(" "),s("td",[t._v('изменить "Percent" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_timer(int v)")]),t._v(" "),s("td",[t._v('изменить "Limits timer" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_to0(bool v)")]),t._v(" "),s("td",[t._v('изменить "To0" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_virtual_0_pos(bool v)")]),t._v(" "),s("td",[t._v('изменить "Virt 0 pos" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_opened(double v)")]),t._v(" "),s("td",[t._v('изменить "Opened" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_opened_comission(double v)")]),t._v(" "),s("td",[t._v('изменить "Commission sum" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_fin_res_wo_c(double v)")]),t._v(" "),s("td",[t._v('изменить "Fin res wo C" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_fin_res(double v)")]),t._v(" "),s("td",[t._v('изменить "Fin res" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_n_perc_fill(int v)")]),t._v(" "),s("td",[t._v('изменить "n_perc_fill" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_max_not_hedged(int v)")]),t._v(" "),s("td",[t._v('изменить "Max not hedged" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_return_first(double v)")]),t._v(" "),s("td",[t._v('изменить "Return first" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_price_check(double v)")]),t._v(" "),s("td",[t._v('изменить "Price check" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_hedge_after(int v)")]),t._v(" "),s("td",[t._v('изменить "Hedge (sec)" портфеля на значение v')])]),t._v(" "),s("tr",[s("td",[t._v("void set_overlay(long long v)")]),t._v(" "),s("td",[t._v('изменить "Overlay" портфеля на значение v')])])])]),t._v(" "),s("p",[t._v("Поля "),s("code",[t._v("deal_item")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Название")]),t._v(" "),s("th",[t._v("Тип")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("price")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("средневзвешенная цена сделки")])]),t._v(" "),s("tr",[s("td",[t._v("amount")]),t._v(" "),s("td",[t._v("long long")]),t._v(" "),s("td",[t._v("суммарный объем сделки в лотах")])]),t._v(" "),s("tr",[s("td",[t._v("dir")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("направление сделки: 1 - покупка, 2 - продажа")])])])]),t._v(" "),s("p",[t._v("Методы "),s("code",[t._v("dict_double")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("double& operator[](int key)")]),t._v(" "),s("td",[t._v("получить/изменить значение по ключу (ключ - это число из отрезка [0, 29])")])]),t._v(" "),s("tr",[s("td",[t._v("void erase(int key)")]),t._v(" "),s("td",[t._v("удалить значение по ключу")])]),t._v(" "),s("tr",[s("td",[t._v("bool has(int key)")]),t._v(" "),s("td",[t._v("проверить наличие значение по ключу")])]),t._v(" "),s("tr",[s("td",[t._v("std::string to_string()")]),t._v(" "),s("td",[t._v("строковое представление объекта")])])])]),t._v(" "),s("h2",{attrs:{id:"_8-6-доступ-и-изменение-позиции-транзакционного-подключения"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-доступ-и-изменение-позиции-транзакционного-подключения"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.6. Доступ и изменение позиций транзакционного подключения")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Функция")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("struct connection get_connection(const std::string& c)")]),t._v(" "),s("td",[t._v("получить подключение c именем c")])])])]),t._v(" "),s("p",[t._v("Методы "),s("code",[t._v("connection")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("sec_item sec(const std::string& s)")]),t._v(" "),s("td",[t._v("получить информацию о позиции инструмена на бирже (в качестве s необходимо использовать SecBoard из Параметры позиций по инструментам)")])]),t._v(" "),s("tr",[s("td",[t._v("coin_item sec(const std::string& s)")]),t._v(" "),s("td",[t._v("получить информацию о балансе валюты на бирже (в качестве s необходимо использовать Currency из Параметры позиций по валютам)")])]),t._v(" "),s("tr",[s("td",[t._v("bool is_active()")]),t._v(" "),s("td",[t._v("получить информацию о том подключено ли подключение к бирже")])])])]),t._v(" "),s("p",[t._v("Meтоды "),s("code",[t._v("sec_item")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("long long pos()")]),t._v(" "),s("td",[t._v('получить поле "Pos" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("long long robot_pos()")]),t._v(" "),s("td",[t._v('получить поле "Robot pos" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("double mark_price()")]),t._v(" "),s("td",[t._v('получить поле "Mark. price" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("double liq_price()")]),t._v(" "),s("td",[t._v('получить поле "Liq. price" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("long long pos_lag()")]),t._v(" "),s("td",[t._v('получить поле "Pos lag" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("bool pos_eq()")]),t._v(" "),s("td",[t._v('получить поле "Check equality" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("bool tgr()")]),t._v(" "),s("td",[t._v('получить поле "Tgr notify" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("void set_pos_lag(long long v)")]),t._v(" "),s("td",[t._v('изменить поле "Pos lag" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("void set_pos_eq(bool v)")]),t._v(" "),s("td",[t._v('изменить поле "Check equality" инструмента')])]),t._v(" "),s("tr",[s("td",[t._v("void set_tgr(bool v)")]),t._v(" "),s("td",[t._v('изменить поле "Tgr notify" инструмента')])])])]),t._v(" "),s("p",[t._v("Meтоды "),s("code",[t._v("coin_item")]),t._v(":")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Метод")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("double pos()")]),t._v(" "),s("td",[t._v('получить поле "Pos" (или "Limit") валюты')])]),t._v(" "),s("tr",[s("td",[t._v("double robot_pos()")]),t._v(" "),s("td",[t._v('получить поле "Robot pos" валюты')])]),t._v(" "),s("tr",[s("td",[t._v("double pos_lag()")]),t._v(" "),s("td",[t._v('получить поле "Pos lag" валюты')])]),t._v(" "),s("tr",[s("td",[t._v("bool pos_eq()")]),t._v(" "),s("td",[t._v('получить поле "Check equality" валюты')])]),t._v(" "),s("tr",[s("td",[t._v("bool tgr()")]),t._v(" "),s("td",[t._v('получить поле "Tgr notify" валюты')])]),t._v(" "),s("tr",[s("td",[t._v("void set_pos_lag(double v)")]),t._v(" "),s("td",[t._v('изменить поле "Pos lag" валюты')])]),t._v(" "),s("tr",[s("td",[t._v("void set_pos_eq(bool v)")]),t._v(" "),s("td",[t._v('изменить поле "Check equality" валюты')])]),t._v(" "),s("tr",[s("td",[t._v("void set_tgr(bool v)")]),t._v(" "),s("td",[t._v('изменить поле "Tgr notify" валюты')])])])]),t._v(" "),s("h2",{attrs:{id:"_8-7-дополнительные-функции-и-константы"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-дополнительные-функции-и-константы"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.7. Дополнительные функции и константы")])]),t._v(" "),s("h3",{attrs:{id:"_8-7-1-константы"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-1-константы"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.7.1. Константы")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Название")]),t._v(" "),s("th",[t._v("Тип")]),t._v(" "),s("th",[t._v("Значение/описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("BUY")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("1, направление торговли - покупка")])]),t._v(" "),s("tr",[s("td",[t._v("SELL")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("2, направление торговли - продажа")])]),t._v(" "),s("tr",[s("td",[t._v("FREE")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("0, заявка не активна")])]),t._v(" "),s("tr",[s("td",[t._v("ADDING")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("1, заявка отправлена на биржу")])]),t._v(" "),s("tr",[s("td",[t._v("RUNNING")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("2, получен ответ о том, что заявка выставлена")])]),t._v(" "),s("tr",[s("td",[t._v("DELETING")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("4, снятие заявки отправлено на биржу")])]),t._v(" "),s("tr",[s("td",[t._v("FIRST_DELETING")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("5, снятие котируемой заявки отправлено на биржу")])]),t._v(" "),s("tr",[s("td",[t._v("SL_DELETING")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("6, снятие заявки по стопу отправлено на биржу")])]),t._v(" "),s("tr",[s("td",[t._v("MOVING")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("7, запрос на изменение заявки отправлен на биржу")])]),t._v(" "),s("tr",[s("td",[t._v("ADD_ERROR")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("99, ошибка выставления заявки")])]),t._v(" "),s("tr",[s("td",[t._v("TRADING_HALT")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("0, выставления и снятие заявок запрещены")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{name:"__TRADING_CAN_PLACE__"}}),t._v("TRADING_CAN_PLACE")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("1, разрешено выставления заявок")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{name:"__TRADING_CAN_CANCEL__"}}),t._v("TRADING_CAN_CANCEL")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("2, разрешено снятие заявок")])]),t._v(" "),s("tr",[s("td",[t._v("MARKET_DATA_OFFLINE")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("0, маркет-дата подключение для данной бумаги оффлайн")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{name:"__MARKET_DATA_BESTS_ONLINE__"}}),t._v("MARKET_DATA_BESTS_ONLINE")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("1, для данной бумаги маркет-дата подключение с лучшими ценами на покупку/продажу онлайн")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{name:"__MARKET_DATA_OB_ONLINE__"}}),t._v("MARKET_DATA_OB_ONLINE")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("2, для данной бумаги маркет-дата подключение со стаканами онлайн")])]),t._v(" "),s("tr",[s("td",[t._v("NAME")]),t._v(" "),s("td",[t._v("std::string")]),t._v(" "),s("td",[t._v("имя текущего портфеля")])])])]),t._v(" "),s("h3",{attrs:{id:"_8-7-2-функции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-2-функции"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.7.2. Функции")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Функция")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("long long nanosec_date_time()")]),t._v(" "),s("td",[t._v("получить текущее время в epoch в наносекундах")])]),t._v(" "),s("tr",[s("td",[t._v("struct tm global_tm()")]),t._v(" "),s("td",[t._v("получить текущее время")])]),t._v(" "),s("tr",[s("td",[t._v("void log_info(const std::string& msg)")]),t._v(" "),s("td",[t._v("отправить сообщение с уровнем INFO в лог")])]),t._v(" "),s("tr",[s("td",[t._v("void log_warn(const std::string& msg)")]),t._v(" "),s("td",[t._v("отправить сообщение с уровнем WARNING в лог")])]),t._v(" "),s("tr",[s("td",[t._v("void log_error(const std::string& msg)")]),t._v(" "),s("td",[t._v("отправить сообщение с уровнем ERROR в лог")])])])]),t._v(" "),s("h3",{attrs:{id:"_8-7-3-функции-для-работы-с-опционами"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-3-функции-для-работы-с-опционами"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.7.3. Функции для работы с опционами")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("delta()")]),t._v(" "),s("th",[t._v("gamma()")]),t._v(" "),s("th",[t._v("vega()")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("theta()")]),t._v(" "),s("td",[t._v("iv()")]),t._v(" "),s("td",[t._v("price()")])]),t._v(" "),s("tr",[s("td",[t._v("c()")]),t._v(" "),s("td",[t._v("p()")]),t._v(" "),s("td",[t._v("cdelta()")])]),t._v(" "),s("tr",[s("td",[t._v("pdelta()")]),t._v(" "),s("td",[t._v("cgamma()")]),t._v(" "),s("td",[t._v("pgamma()")])]),t._v(" "),s("tr",[s("td",[t._v("cvega()")]),t._v(" "),s("td",[t._v("pvega()")]),t._v(" "),s("td",[t._v("ctheta()")])]),t._v(" "),s("tr",[s("td",[t._v("ptheta()")]),t._v(" "),s("td",[t._v("civ()")]),t._v(" "),s("td",[t._v("piv()")])])])]),t._v(" "),s("p",[s("strong",[t._v("double S_delta(const std::string& s, double rate = 0) double P_delta(const std::string& p, double rate = 0)")]),s("br"),t._v("\nвычисляет дельту финансового инструмента или портфеля со ставкой рефинансирования "),s("code",[t._v("rate")]),t._v(" (указывается в процентах)")]),t._v(" "),s("p",[s("strong",[t._v("double S_gamma(const std::string& s, double rate = 0) double P_gamma(const std::string& p, double rate = 0)")]),s("br"),t._v("\nвычисляет гамму финансового инструмента или портфеля со ставкой рефинансирования "),s("code",[t._v("rate")]),t._v(" (указывается в процентах)")]),t._v(" "),s("p",[s("strong",[t._v("double S_vega(const std::string& s, double rate = 0) double P_vega(const std::string& p, double rate = 0)")]),s("br"),t._v("\nвычисляет вегу финансового инструмента или портфеля со ставкой рефинансирования "),s("code",[t._v("rate")]),t._v(" (указывается в процентах)")]),t._v(" "),s("p",[s("strong",[t._v("double S_theta(const std::string& s, double rate = 0) double P_theta(const std::string& p, double rate = 0)")]),s("br"),t._v("\nвычисляет тету финансового инструмента или портфеля со ставкой рефинансирования "),s("code",[t._v("rate")]),t._v(" (указывается в процентах)")]),t._v(" "),s("p",[s("strong",[t._v("double S_iv(const std::string& key, double rate = 0) double P_iv(const std::string& p, double rate = 0)")]),s("br"),t._v("\nвычисляет ожидаемую волатильность опциона или портфеля со ставкой рефинансирования "),s("code",[t._v("rate")]),t._v(" (указывается в процентах)")]),t._v(" "),s("p",[s("strong",[t._v("double S_price(const std::string& s, double rate = 0)")]),s("br"),t._v("\nвычисляет справедливую цену опциона со ставкой рефинансирования "),s("code",[t._v("rate")]),t._v(" (указывается в процентах)")]),t._v(" "),s("p",[s("strong",[t._v("double C(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет справедливую цену опциона "),s("code",[t._v("call")])]),t._v(" "),s("p",[t._v("Аргументы:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Название")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("s")]),t._v(" "),s("td",[t._v("ключ инструмента SecKey")])]),t._v(" "),s("tr",[s("td",[t._v("p")]),t._v(" "),s("td",[t._v("имя портфеля")])]),t._v(" "),s("tr",[s("td",[t._v("futPrice")]),t._v(" "),s("td",[t._v("цена базового актива")])]),t._v(" "),s("tr",[s("td",[t._v("strike")]),t._v(" "),s("td",[t._v("цена страйк опциона")])]),t._v(" "),s("tr",[s("td",[t._v("expData")]),t._v(" "),s("td",[t._v("дата экспирации опциона в формате epoch")])]),t._v(" "),s("tr",[s("td",[t._v("iv")]),t._v(" "),s("td",[t._v("ожидаемая волатильность")])]),t._v(" "),s("tr",[s("td",[t._v("rate")]),t._v(" "),s("td",[t._v("ставка рефинансирования в процентах")])])])]),t._v(" "),s("p",[s("strong",[t._v("double P(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет справедливую цену опциона "),s("code",[t._v("put")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double CDELTA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет дельту опциона "),s("code",[t._v("call")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double PDELTA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),t._v("\nвычисляет дельту опциона "),s("code",[t._v("put")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double CGAMMMA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет гамму опциона "),s("code",[t._v("call")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double PGAMMA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет гамму опциона "),s("code",[t._v("put")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double CVEGA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет вегу опциона "),s("code",[t._v("call")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double PVEGA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет вегу опциона "),s("code",[t._v("put")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double CTHETA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет тету опциона "),s("code",[t._v("call")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double PTHETA(double futPrice, double strike, double expDate, double iv, double rate=0)")]),s("br"),t._v("\nвычисляет тету опциона "),s("code",[t._v("put")]),t._v(", аргументы такие же, как для C()")]),t._v(" "),s("p",[s("strong",[t._v("double CIV(double futPrice, double strike, double expDate, double call, double rate=0)")]),s("br"),t._v("\nвычисляет implied volatility опциона "),s("code",[t._v("call")])]),t._v(" "),s("p",[s("strong",[t._v("double PIV(double futPrice, double strike, double expDate, double put, double rate=0)")]),s("br"),t._v("\nвычисляет implied volatility опциона "),s("code",[t._v("put")])]),t._v(" "),s("p",[t._v("Аргументы:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Название")]),t._v(" "),s("th",[t._v("Описание")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("futPrice")]),t._v(" "),s("td",[t._v("цена базового актива")])]),t._v(" "),s("tr",[s("td",[t._v("strike")]),t._v(" "),s("td",[t._v("цена страйк опциона")])]),t._v(" "),s("tr",[s("td",[t._v("expData")]),t._v(" "),s("td",[t._v("дата экспирации опциона в формате epoch")])]),t._v(" "),s("tr",[s("td",[t._v("call/put")]),t._v(" "),s("td",[t._v("цена опциона")])]),t._v(" "),s("tr",[s("td",[t._v("rate")]),t._v(" "),s("td",[t._v("ставка рефинансирования в процентах")])])])]),t._v(" "),s("h2",{attrs:{id:"_8-8-примеры-доступа-к-параметрам-портфеля-инструмента-сделки-позиции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-8-примеры-доступа-к-параметрам-портфеля-инструмента-сделки-позиции"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.8. Примеры доступа к параметрам портфеля, инструмента, сделки, позиций")])]),t._v(" "),s("p",[t._v('Пусть имеется портфель с именем "si" и в этом портфеле есть один инструмент - фьючерс на доллар "SiH6". Для того, чтобы получить, например, бид и объем бида по бумаге портфеля и сложить эти значения в переменные, надо написать следующий код:')]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" bid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" amount_bid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("amount_bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Чтобы получить, например, позицию и сигнал на покупку портфеля надо написать:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("portfolio p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_portfolio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" lim_buy "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("lim_b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" pos "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[s("a",{attrs:{name:"__sec_status_check__"}}),t._v("Чтобы проверить, например, что в данный момент по инструменту можно выставлять заявки и в роботе есть активное подключение, получающее стаканы:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trading_status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" TRADING_CAN_PLACE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("conn_online")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" MARKET_DATA_OB_ONLINE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO place your code here")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Позицию портфеля можно посчитать самому, разделив позицию главной бумаги портфеля на ее вес в портфеле, вот так:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security_fields sf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security_fields")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" pos "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" sf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Для подсчета раздвижки по сделкам портфеля можно использовать формулу:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("portfolio p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_portfolio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Сохранить и загрузить значение из data можно так:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("portfolio p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_portfolio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"si"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Сохранить и загрузить значение из extra можно так:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("portfolio p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_portfolio")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"si"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extra")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extra")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[s("a",{attrs:{name:"__Example1__"}}),t._v(" Чтобы получить, например, цену последней сделки для бумаги с СПб биржи (получение цены последней сделки по ключу возможно только для СПБ биржи):")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SPB_AGGR_AAPL"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" spb_commons"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("spb_common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price_last"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Чтобы найти, например, средневзвешенный бид по первым 10-ти элементам стакана (настоятельно НЕ рекомендуется искать что-то по всему стакану, т.к. стакан меняется часто, то работать ваш код будет долго):")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" sum1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sum2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" avg_bid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsecurity s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SPB_AGGR_AAPL"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\norder_book ob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("orderbook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("is_available")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" ob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("has_next_bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        std"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),t._v("pair"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next_bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        sum1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("first "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("second"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        sum2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("second"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\navg_bid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sum2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sum1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" sum2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Чтобы найти, например, сумму объемов активных заявок портфеля по бумаге по заданной цене 100:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security_fields sf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security_fields")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\norder_pool p "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("orders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("has_next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    order_item o "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("status "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" RUNNING "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fabs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("price "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1e-9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("amount_rest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[t._v("Чтобы найти, например, текущую позицию по бумаге и текущий баланс по валюте:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("connection c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_connection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"okex_send_test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncoin_item ci "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("coin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"BTC"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsec_item si "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" c"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"isolated/BTC-USD-SWAP"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" coin_pos "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ci"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" sec_pos "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" si"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h2",{attrs:{id:"_8-9-примеры-использования-функции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-9-примеры-использования-функции"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.9. Примеры использования функций")])]),t._v(" "),s("p",[t._v('Пусть имеется портфель с именем "test" и в этом портфеле есть два инструмента: фьючерс на индекс РТС "RIH6" и его опцион call на страйк 70000 "RI70000BB6", позиция по обоим бумагам в портфеле равна 1, а направление торговли у обоих '),s("code",[t._v("On buy = Buy")]),t._v(".")]),t._v(" "),s("p",[t._v('Рассчитаем дельту одного из инструментов портфеля, например, "RIH6". Для этого воспользуемся функцией delta из модуля options. Дельта для фьючерса всегда равна 1, проверим, для этого надо написать:')]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("S_delta")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RIH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("и выполнить этот код, в результате получим 1. Если хотим рассчитать дельту с учетом ставки рефинансирования, то укажем необязательный параметр rr, например, равный 6.25%:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("P_delta")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("здесь test - имя портфеля (для портфелей с другими именами нужно писать их имена). Дельта всего портфеля будет равна сумме дельт его инструментов с учетом позиции и направления торговли:")]),t._v(" "),s("p",[s("img",{attrs:{src:_(305),alt:"Alt text"}})]),t._v(" "),s("p",[t._v("где i - i - i-ый инструмент портфеля, Δi - дельта i - го инструмента портфеля, posi - позиция i-го инструмента портфеля, On buyi - On buy i-го инструмента портфеля. Величины гамма, вега, тета и ожидаемая волатильность для портфеля рассчитываются аналогично. Функции для их рассчета вызываются аналогично примеру с дельтой. Функция price так же вызывается аналогично delta, но НЕ может быть вызвана для портфеля, может быть вызвана только для финансового инструмента.")]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v('Теперь рассмотрим пример использования функций, которые позволяют более "гибко" рассчитывать необходимые величины, так как им на вход можно передать более широкий набор аргументов, но эти функции работают исключительно для опционов и при использовании этих функций необходимо четко знать для опциона '),s("code",[t._v("call")]),t._v(" или для опциона "),s("code",[t._v("put")]),t._v(' вы хотите рассчитать значение. Например, рассчитаем ожидаемую волатильность опциона "RI70000BB6", в качестве цен опциона и базового актива возьмем их лучшие цены на покупку:')]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RIH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsecurity s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RI70000BB6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CIV")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("strike")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exp_date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("hr"),t._v(" "),s("h2",{attrs:{id:"_8-10-примеры-написания-ratio-buy-sell-formula"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-10-примеры-написания-ratio-buy-sell-formula"}},[t._v("#")]),t._v(" "),s("strong",[t._v("8.10. Примеры написания Ratio buy/sell formula")])]),t._v(" "),s("p",[t._v("При написании формул можно использовать все те инструменты, которые используются в любом из портфелей, также можно использовать доступные значения других портфелей , например, их позиции по бумагам.")]),t._v(" "),s("p",[t._v("Для того, чтобы использовать поле "),s("code",[t._v("Ratio buy/sell formula")]),t._v(" необходимо для выбранного инструмента портфеля выбрать "),s("code",[t._v("Ratio type = Ratio formula")]),t._v(". После этого двойным кликом войти в редактор и написать необходимое значение.")]),t._v(" "),s("p",[t._v('Пусть имеется портфель с именем "si" и в этом портфеле есть один инструмент - фьючерс на доллар "SiH6", направление торговли этого инструмента '),s("code",[t._v("On buy = Buy")]),t._v(".")]),t._v(" "),s("p",[t._v("Если "),s("code",[t._v('Ratio sign = "×"')]),t._v(", то ничего особо-то интересного с формулами не придумаешь, разве что какой-то хитрый множитель (и для покупки и для продажи), например, такой:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sqrt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("в таком случае для расчета "),s("code",[t._v("Buy")]),t._v(" и "),s("code",[t._v("Sell")]),t._v(" будет использован один и тот же множитель, если же вы хотите использовать разные множители надо вписать разные значения в "),s("code",[t._v("Ratio buy formula")]),t._v(" и "),s("code",[t._v("Ratio sell formula")]),t._v(", например, так:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sqrt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sqrt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("для покупки и продажи, соответственно.")]),t._v(" "),s("p",[t._v("В таком случае для расчета "),s("code",[t._v("Buy")]),t._v(" будет использован квадратный корень из бида, а для расчета "),s("code",[t._v("Sell")]),t._v(" будет использован квадратный корень из оффера.")]),t._v(" "),s("p",[t._v("Если же "),s("code",[t._v('Ratio sign = "+"')]),t._v(", то вы можете полностью изменить формулу расчета "),s("code",[t._v("Buy")]),t._v(" и "),s("code",[t._v("Sell")]),t._v(", для этого надо для начала вычесть те значения, которые используются в данный момент, тем самым обнулив "),s("code",[t._v("Buy")]),t._v(" и "),s("code",[t._v("Sell")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("для покупки и продажи, соответственно, а после этого прибавить к "),s("code",[t._v("Buy")]),t._v(" и "),s("code",[t._v("Sell")]),t._v(" новое значение, например, так:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" price "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("и")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" price "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("теперь значения переменной "),s("code",[t._v("price")]),t._v(" при расчете каждого из параметров будут новыми значениями для "),s("code",[t._v("Buy")]),t._v(" и "),s("code",[t._v("Sell")]),t._v(". Хочется отметить, что без использования "),s("code",[t._v("Ratio formula")]),t._v(' такое "хитрое" значение получить бы не удалось.')]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v('Рассмотрим еще один пример. Пусть имеется портфель с именем "test" и в этом портфеле есть два инструмента: фьючерс на доллар "SiH6", направление торговли этого инструмента '),s("code",[t._v("On buy = Buy")]),t._v(" и он является "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-11-is-first"}},[t._v("Is first")]),t._v(' и фьючерс на индекс РТС "RIH6", направление торговли этого инструмента тоже '),s("code",[t._v("On buy = Buy")]),t._v(" (для примера направление не "),s("RouterLink",{attrs:{to:"/docs/05-params-description.html#_5-3-11-is-first"}},[t._v("Is first")]),t._v(" инструмента значения не имеет). Для того чтобы использовать эти два инструмента в одном портфеле нужно привести их цены в пунктах к одной размерности, как известно, доллар торгуется в рублях (1 : pt = 1 rub), а вот индекс торгуется не в рублях, для него 1 pt = 0.02 * "),s("code",[t._v("$")]),s("sub",[t._v("price")]),t._v(" rub (где "),s("code",[t._v("$")]),s("sub",[t._v("price")]),t._v(" - это курс доллара в рублях, но это не константа, а динамически изменяющаяся величина). Есть два варианта решения поставленной задачи, оба реализуемы только с использованием "),s("code",[t._v("Ratio formula")]),t._v(" и оба приводят к абсолютно одинаковому результату. Вот они:")],1),t._v(" "),s("ol",[s("li",[s("p",[t._v("Для доллара просто зададим "),s("code",[t._v("Ratio")]),t._v(" = 1, а вот для индекса РТС выберем "),s("code",[t._v('Ratio sign = "×"')]),t._v(", а в Ratio buy formula напишем следующее:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.02")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("в "),s("code",[t._v("Ratio sell formula")]),t._v(" напишем следующее:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.02")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("таким образом при расчете "),s("code",[t._v("Buy")]),t._v(" мы будем использовать бид доллара, а при расчете "),s("code",[t._v("Sell")]),t._v(" - его оффер, и величину получим в рублях.")])]),t._v(" "),s("li",[s("p",[t._v("Для доллара просто зададим "),s("code",[t._v("Ratio")]),t._v(" = 1, а вот для индекса РТС выберем "),s("code",[t._v('Ratio sign = "+"')]),t._v(", а в "),s("code",[t._v("Ratio buy formula")]),t._v(" напишем следующее (вначале обнулим значение, как в предыдущем примере, а затем зададим новое):")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsecurity s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RIH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" price "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.02")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("в "),s("code",[t._v("Ratio sell formula")]),t._v(" напишем следующее:")]),t._v(" "),s("div",{staticClass:"language-C extra-class"},[s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[t._v("security s1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SiH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nsecurity s2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_security")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RIH6"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("double")]),t._v(" price "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.02")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" s1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.001")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("s2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bid")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" price"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("теперь значения переменной price и будут новыми значениями (так сказать, со стороны индекса РТС), используемыми для расчета "),s("code",[t._v("Buy")]),t._v(" и "),s("code",[t._v("Sell")]),t._v(", соответственно.")])])])])}),[],!1,null,null,null);s.default=a.exports}}]);