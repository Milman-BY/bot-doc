<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>10. API v2 | Документация торговых роботов компании &quot;Викинг&quot;</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <link rel="icon" href="/bot-doc/favicon.ico">
    <meta name="description" content="Руководство пользователя, описание алгоритма и API">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/bot-doc/assets/css/0.styles.11a3ea9e.css" as="style"><link rel="preload" href="/bot-doc/assets/js/app.26050a84.js" as="script"><link rel="preload" href="/bot-doc/assets/js/3.996009ba.js" as="script"><link rel="preload" href="/bot-doc/assets/js/19.bd3febe1.js" as="script"><link rel="prefetch" href="/bot-doc/assets/js/10.a651cd75.js"><link rel="prefetch" href="/bot-doc/assets/js/11.2895fb5b.js"><link rel="prefetch" href="/bot-doc/assets/js/12.1b4d40fd.js"><link rel="prefetch" href="/bot-doc/assets/js/13.ff12f0b5.js"><link rel="prefetch" href="/bot-doc/assets/js/14.68ec2925.js"><link rel="prefetch" href="/bot-doc/assets/js/15.b3c71097.js"><link rel="prefetch" href="/bot-doc/assets/js/16.ccd2af29.js"><link rel="prefetch" href="/bot-doc/assets/js/17.1c8fdc03.js"><link rel="prefetch" href="/bot-doc/assets/js/18.0425e1a8.js"><link rel="prefetch" href="/bot-doc/assets/js/20.fbcc97bb.js"><link rel="prefetch" href="/bot-doc/assets/js/21.e93ebc90.js"><link rel="prefetch" href="/bot-doc/assets/js/4.721771c5.js"><link rel="prefetch" href="/bot-doc/assets/js/5.42ce668b.js"><link rel="prefetch" href="/bot-doc/assets/js/6.ee10006d.js"><link rel="prefetch" href="/bot-doc/assets/js/7.405437f7.js"><link rel="prefetch" href="/bot-doc/assets/js/8.149a5778.js"><link rel="prefetch" href="/bot-doc/assets/js/9.88feb439.js"><link rel="prefetch" href="/bot-doc/assets/js/vendors~docsearch.c566cd26.js">
    <link rel="stylesheet" href="/bot-doc/assets/css/0.styles.11a3ea9e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bot-doc/" class="home-link router-link-active"><img src="/bot-doc/images/vkg_logo.svg" alt="Документация торговых роботов компании &quot;Викинг&quot;" class="logo"> <span class="site-name can-hide">Документация торговых роботов компании &quot;Викинг&quot;</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bot-doc/docs/" class="nav-link router-link-active">
  Документация
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bot-doc/docs/" class="nav-link router-link-active">
  Документация
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bot-doc/docs/01-change-history.html" class="sidebar-link">1. История изменений</a></li><li><a href="/bot-doc/docs/02-introduction.html" class="sidebar-link">2. Введение</a></li><li><a href="/bot-doc/docs/03-getting-started.html" class="sidebar-link">3. Начало работы</a></li><li><a href="/bot-doc/docs/04-creating-connection.html" class="sidebar-link">4. Добавление подключений</a></li><li><a href="/bot-doc/docs/05-params-description.html" class="sidebar-link">5. Описание параметров</a></li><li><a href="/bot-doc/docs/06-algorithm-comments.html" class="sidebar-link">6. Примечания к алгоритму</a></li><li><a href="/bot-doc/docs/07-order-error.html" class="sidebar-link">7. Ошибки заявок</a></li><li><a href="/bot-doc/docs/08-c-api.html" class="sidebar-link">8. C++</a></li><li><a href="/bot-doc/docs/09-api-v1.html" class="sidebar-link">9. API</a></li><li><a href="/bot-doc/docs/10-api-v2.html" aria-current="page" class="active sidebar-link">10. API v2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bot-doc/docs/10-api-v2.html#_10-1-подписки" class="sidebar-link">10.1. Подписки</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/10-api-v2.html#_10-2-запросы" class="sidebar-link">10.2. Запросы</a></li></ul></li><li><a href="/bot-doc/docs/11-faq.html" class="sidebar-link">11. Часто задаваемые вопросы</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_10-api-v2"><a href="#_10-api-v2" class="header-anchor">#</a> <strong>10. API v2</strong></h1> <h2 id="_10-1-подписки"><a href="#_10-1-подписки" class="header-anchor">#</a> <strong>10.1. Подписки</strong></h2> <h3 id="_10-1-1-подписка-на-дерево"><a href="#_10-1-1-подписка-на-дерево" class="header-anchor">#</a> <strong>10.1.1. Подписка на &quot;дерево&quot;</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;robots&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;robots&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;
<code>admin</code> - получать данные доступные только для админа.</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;test&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;re_buy&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;re_sell&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">,</span> <span class="token string">&quot;client_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key_subscr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTCUSDT&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;has_virtual&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;0_virtual&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;sec_pos&quot;</span><span class="token operator">:</span>null<span class="token punctuation">,</span> <span class="token string">&quot;coin_pos&quot;</span><span class="token operator">:</span>null<span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;data_conns&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;34359738368_binancefut_listen&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;binancefut_listen&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;start&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;rl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rvd&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;mc&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;de&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;pms&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rc&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;12&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;test&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;re_buy&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;re_sell&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">,</span> <span class="token string">&quot;client_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key_subscr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTCUSDT&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;has_virtual&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;0_virtual&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;sec_pos&quot;</span><span class="token operator">:</span>null<span class="token punctuation">,</span> <span class="token string">&quot;coin_pos&quot;</span><span class="token operator">:</span>null<span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;data_conns&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;34359738368_binancefut_listen&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;binancefut_listen&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;start&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;rl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rvd&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;mc&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;de&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;pms&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rc&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646903524392865792</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление;<br> <code>re_sell/re_buy</code> - портфель может покупать/продавать;<br> <code>all_free</code> - нет активных заявок в портфеле;<br> <code>disabled</code> - портфель отключен;<br> <code>has_virtual</code> - торговля с использованием виртуальных подключений;<br> <code>name</code> - имя;<br> <code>owner</code> - создатель/хозяин портфеля;<br> <code>client_code</code> - используемое торговое подключение;<br> <code>start</code> - флаг, означающий должен ли быть в данный момент включен робот;<br> <code>rl</code> - имя робота;<br> <code>rv</code> - версия робота;<br> <code>rvd</code> - дата версии робота;<br> <code>mc</code> - число проходов главного цикла событий в секунду;<br> <code>mtc</code> - лимит транзакционных подключений;<br> <code>de</code> - осталось дней до окончания лицензии (0 - лицензия закончилась, &lt;=0 - не известно);<br> <code>dt</code> - дата/время на сервере робота;<br> <code>pms</code> - права (FOR_ALL = 0, USER = 1, ADMIN = 10);<br> <code>rc</code> - робот подключен;<br> <code>wr</code> - робот ожидает перезапуска после смены &quot;критичных&quot; настроек;<br> <code>gc</code> - все подключения робота к биржам подключены (CLOSED = 0, OPENING = 1, ONLINE = 2, UNKNOWN = 3);<br> <code>tr</code> - торговля включена или есть активные заявки (NOT_TRADING = 0, TRADING = 2, UNKNOWN = 3);<br> <code>shared</code> - &quot;шареный робот&quot;;<br> <code>ip</code> - доступные адреса;<br> <code>__action</code> - если равно &quot;del&quot;, то удалить данный ключ;<br> <code>clear</code> - имя ключа, который нужно удалить из данного словаря (удалять нужно первым делом, т.к. в сообщении содержится новое значение данного ключа);<br> <code>expiration</code> - дата окончания действия лицензии (только для админа);<br> <code>robot_comment</code> - комментарий (только для админа);<br> <code>max_trans_count</code> - лимит транзакционных подключений (только для админа);<br> <code>log_days</code> - сколько дней хранить логи (только для админа);<br> <code>cpu</code> - исползуемое ядро процессора (только для админа);<br> <code>robot_type</code> - имя сборки (только для админа);<br> <code>for_all</code> - робот доступный всем (только для админа);<br> <code>cmd_params</code> - параметры запуска (только для админа);<br> <code>mail_to</code> - отправлить сообщение на почты(только для админа);<br> <code>users</code> - пользователи робота (только для админа).</p> <p><em>Обновления (приходит только id робота, имя портфеля и бумаги или ключ подключения, и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;qwe&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;__action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;del&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;rc&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646903528002037248</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h3 id="_10-1-2-подписка-на-обновляемые-своиства-робота"><a href="#_10-1-2-подписка-на-обновляемые-своиства-робота" class="header-anchor">#</a> <strong>10.1.2. Подписка на &quot;обновляемые свойства&quot; робота</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;monitor&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;monitor&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;monitor&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span>null<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота или список id-роботов (не более 20-ти штук) или null (т.е. все роботы).</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;rv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4735fc6&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rvd&quot;</span><span class="token operator">:</span><span class="token number">1646313286</span><span class="token punctuation">,</span> <span class="token string">&quot;mc&quot;</span><span class="token operator">:</span><span class="token number">1364430</span><span class="token punctuation">,</span> <span class="token string">&quot;mtc&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;de&quot;</span><span class="token operator">:</span><span class="token number">4087</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1646917931000</span><span class="token punctuation">,</span> <span class="token string">&quot;rc&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;start&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;rl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;12&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;rv&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rvd&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;mc&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;de&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;rc&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;start&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;rl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646909299756444672</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления (приходит только id робота, и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;rc&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646903528002037248</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h3 id="_10-1-3-подписка-на-транзакционные-market-data-подключения"><a href="#_10-1-3-подписка-на-транзакционные-market-data-подключения" class="header-anchor">#</a> <strong>10.1.3. Подписка на транзакционные/market-data подключения</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trans_conns&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;data_conns&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trans_conns&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span>null<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;data_conns&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;c_key&quot;</span><span class="token operator">:</span><span class="token string">&quot;34359738368_binancefut_listen&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота или список id-роботов (не более 20-ти штук) или null (т.е. все роботы);<br> <code>c_key</code> - id-подключения (это строка в формате &quot;{sec_type}_{name}&quot;, для транзакционных подключений name - это короткое имя, без приписки с именем биржи и словом send) или список id-подключений (не более 20-ти штук) или null (т.е. все подключения).</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;data_conns&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;34359738368_binancefut_listen&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;binancefut_listen&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bind_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;use_in_mc&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;stream_state&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;Definitions&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;OB&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Socket&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;12&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;data_conns&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;34359738368_binancefut_listen&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;binancefut_listen&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bind_ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646909930327924992</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapsho</code>t - означает снапшот это или обновление.</p> <p><em>Обновления (приходит только id робота, id подключения и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;data_conns&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;34359738368_binancefut_listen&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;binancefut_listen&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;stream_state&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;Definitions&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;OB&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Socket&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646909936001763328</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h3 id="_10-1-4-подписка-на-портфели"><a href="#_10-1-4-подписка-на-портфели" class="header-anchor">#</a> <strong>10.1.4. Подписка на портфели</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolios&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolios&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolios&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span>null<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolios&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота или список id-роботов (не более 20-ти штук) или null (т.е. все роботы);<br> <code>name</code> - имя портфеля или список имен портфелей (не более 20-ти штук) или null (т.е. все портфели).</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;test&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;k&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k1&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k2&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;tp&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;buy&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;to0&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sell&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#FFFFFF&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;delta&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;lim_b&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;lim_s&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;quote&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;timer&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_max&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_min&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_v&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_v&quot;</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_poses&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;btnBuy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;opened&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;re_buy&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;use_tt&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;v_in_l&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_in_r&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;__extra&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token operator">:</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">&quot;5&quot;</span><span class="token operator">:</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span><span class="token operator">:</span><span class="token number">10.1234</span><span class="token punctuation">,</span> <span class="token string">&quot;11&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">123</span><span class="token punctuation">,</span> <span class="token string">&quot;13&quot;</span><span class="token operator">:</span><span class="token number">18704</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_limits&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_pos_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_sell_v&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;btnSell&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;overlay&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;percent&quot;</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;price_b&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;price_s&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;re_sell&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;sell_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v_out_l&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_out_r&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_val&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_val&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_sell_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_volumes&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;btnOrder&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_buy_time&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_b_stop&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_time&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_stop&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_time&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_time&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;btnMarket&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;is_pos_ok&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;log_level&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;timetable&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;_anti_spam&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_freq_type&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_sell_time&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_utilities&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;buy_status&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field1&quot;</span><span class="token operator">:</span><span class="token number">18704</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field2&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;mkt_volume&quot;</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;price_type&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;k&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;sl&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;te&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;tp&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;pos&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;put&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;sle&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;d_pg&quot;</span><span class="token operator">:</span><span class="token number">4133404800</span><span class="token punctuation">,</span> <span class="token string">&quot;k_sl&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;count&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;maker&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;ratio&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;timer&quot;</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;on_buy&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;old_pos&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;depth_ob&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;is_first&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;leverage&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ob_c_p_t&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ob_t_p_t&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTCUSDT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">,</span> <span class="token string">&quot;comission&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_board&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ban_period&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;count_type&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_sign&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_type&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;client_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;move_limits&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;fin_res_mult&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;mc_level_to0&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;move_limits1&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;count_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comission_sign&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;mc_level_close&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key_subscr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTCUSDT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;max_trans_musec&quot;</span><span class="token operator">:</span><span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_b_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_s_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;percent_of_quantity&quot;</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;trading_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;can trade&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;type_trade&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_freq_count&quot;</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_delta&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field1_&quot;</span><span class="token operator">:</span> <span class="token string">&quot;portfolio p = get_portfolio();\np.extra()[13] ++;\nreturn p.extra()[13];&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field2_&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;first_delta&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;has_virtual&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;hedge_after&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;max_running&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;n_perc_fill&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;price_check&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;sell_status&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_abs&quot;</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_val&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;custom_trade&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;equal_prices&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;ext_formulas&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;fin_res_wo_c&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;return_first&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;simply_first&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;tt_only_stop&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_stop&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_time&quot;</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;_limits_shift&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;cur_day_month&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio_num&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">&quot;trade_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;virtual_0_pos&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;max_not_hedged&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio_type&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_max_running_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;is_fin_res_wo_c&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_trading_options&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;opened_comission&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;move_limits1_date&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;always_limits_timer&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_max_running_percent&quot;</span><span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_portfolios&quot;</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646910298974944512</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления (приходит только id робота, имя портфеля и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;test&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trading_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;can not trade&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646910309212547328</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;test&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field1&quot;</span><span class="token operator">:</span><span class="token number">18707</span><span class="token punctuation">,</span> <span class="token string">&quot;__extra&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;13&quot;</span><span class="token operator">:</span><span class="token number">18707</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646910547086022144</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h3 id="_10-1-5-подписка-на-таблицу-финансовых-результатов-раздвижки"><a href="#_10-1-5-подписка-на-таблицу-финансовых-результатов-раздвижки" class="header-anchor">#</a> <strong>10.1.5. Подписка на таблицу финансовых результатов (раздвижки)</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trades&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trades&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trades&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span>null<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота или список id-роботов (не более 20-ти штук) или null (т.е. все роботы).</p> <p><em>Ответ (снапшот, приходят записи за последние несколько секунд, для доступа к истории используйте отдельный запрос):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;3&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;trades&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span> <span class="token number">1571923847981999080</span><span class="token punctuation">,</span> <span class="token string">&quot;is_sl&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7468.5</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD: SELL quantity=1, price=7468.5000, oNo=3, at 17:30:47&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4042437680275238758</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1571923836000529003</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span> <span class="token number">1571923836000529003</span><span class="token punctuation">,</span> <span class="token string">&quot;is_sl&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7476.2</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD: BUY quantity=1, price=7476.2000, oNo=2, at 17:30:36&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">3389679118170958657</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1571923836000529003</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token string">&quot;, &quot;</span>mt<span class="token string">&quot;:1571923836000529003}}},&quot;</span>ts&quot;<span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>trades</code> - список раздвижек;<br> <code>dt</code> - дата/время на сервере бекенда в формате epoch в наносекундах (в запросах участвует именно оно);<br> <code>robot_id</code> - id-робота;<br> <code>t</code> - дата/время в формате epoch в наносекундах;<br> <code>is_sl</code> - заявки были переставлены по стоп-лосс;<br> <code>buy_sell</code> - направление, 1 - покупка, 2 - продажа;<br> <code>quantity</code> - количество в штуках портфелей (всегда целое);<br> <code>price</code> - цена;<br> <code>tt</code> - всплывающая подсказка со списком сделок;<br> <code>decimals</code> - сколько знаков после запятой отображать в цене (price);<br> <code>name</code> - имя портфеля;<br> <code>id</code> - уникальный внутренний идентификатор записи;<br> <code>mt</code> - записи меньше этого времени уже сохранены в базу данных, его необходимо использовать для запроса истории (есть только в снапшоте);<br> <code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления:</em><br>
формат сообщения такой же, как у снапшота, приходят новые раздвижки (обновлений по старым раздвижкам не бывает).</p> <h3 id="_10-1-6-подписка-на-таблицу-всех-сделок"><a href="#_10-1-6-подписка-на-таблицу-всех-сделок" class="header-anchor">#</a> <strong>10.1.6. Подписка на таблицу всех сделок</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;deals&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;deals&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;deals&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span>null<span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота или список id-роботов (не более 20-ти штук) или null (т.е. все роботы).</p> <p><em>Ответ (снапшот, приходят записи за последние несколько секунд, для доступа к истории используйте отдельный запрос):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;3&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;deals&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span> <span class="token number">1571923847981993828</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7468.5</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">4195816474436969915</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1571923836000529003</span><span class="token punctuation">,</span> <span class="token string">&quot;cn&quot;</span><span class="token operator">:</span><span class="token string">&quot;virtual&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span> <span class="token number">1571923836000518880</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7476.2</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">324815817002964722</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1571923836000529003</span><span class="token punctuation">,</span> <span class="token string">&quot;cn&quot;</span><span class="token operator">:</span><span class="token string">&quot;virtual&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span> <span class="token number">1571819580259371838</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">5863</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BN_ADABTC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bin1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">4.76e-06</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">10000000000</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3452938594962378336</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1571923836000529003</span><span class="token punctuation">,</span> <span class="token string">&quot;cn&quot;</span><span class="token operator">:</span><span class="token string">&quot;virtual&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;mt&quot;</span><span class="token operator">:</span><span class="token number">1571923836000529003</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>deals</code> - список сделок;<br> <code>dt</code> - дата/время на сервере бекенда в формате epoch в наносекундах (в запросах участвует именно оно);<br> <code>robot_id</code> - id-робота;<br> <code>t</code> - дата/время в формате epoch в наносекундах;<br> <code>id</code> - уникальный идентификатор записи;<br> <code>ono</code> - номер заявки;<br> <code>buy_sell</code> - направление, 1 - покупка, 2 - продажа;<br> <code>quantity</code> - количество в штуках портфелей (всегда целое);<br> <code>price</code> - цена;<br> <code>decimals</code> - сколько знаков после запятой отображать в цене (price);<br> <code>sec</code> - уникальный идентификатор бумаги;<br> <code>id</code> - уникальный внутренний идентификатор записи;<br> <code>cn</code> - имя подключения с использованием которого была выставлена заявка, которая привела к сделке
name - имя портфеля;<br> <code>mt</code> - записи меньше этого времени уже сохранены в базу данных, его необходимо использовать для запроса истории (есть только в снапшоте);<br> <code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления:</em><br>
формат сообщения такой же, как у снапшота, приходят новые сделки (обновлений по старым сделкам на бывает).</p> <h3 id="_10-1-7-подписка-на-таблицу-всех-логов"><a href="#_10-1-7-подписка-на-таблицу-всех-логов" class="header-anchor">#</a> <strong>10.1.7. Подписка на таблицу всех логов</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;logs&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;logs&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;levels&quot;</span><span class="token operator">:</span>null<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;logs&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span>null<span class="token punctuation">,</span> <span class="token string">&quot;levels&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота или список id-роботов (не более 20-ти штук) или null (т.е. все роботы);<br> <code>levels</code> - список уровней логирования или null (т.е. все уровни).</p> <p><em>Ответ (снапшот, приходят записи за последние несколько секунд, для доступа к истории используйте отдельный запрос):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;logs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">1646305069000027685</span><span class="token punctuation">,</span> <span class="token string">&quot;level&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1646305069001217792</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">1646305070000017878</span><span class="token punctuation">,</span> <span class="token string">&quot;level&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1646305070001291264</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">1646305071000019686</span><span class="token punctuation">,</span> <span class="token string">&quot;level&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1646305071001022720</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">1646305072000019168</span><span class="token punctuation">,</span> <span class="token string">&quot;level&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1646305072001111552</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;mt&quot;</span><span class="token operator">:</span><span class="token number">1646305068001127169</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>logs</code> - список логов;<br> <code>dt</code> - дата/время на сервере бекенда в формате epoch в наносекундах (в запросах участвует именно оно);<br> <code>robot_id</code> - id-робота;<br> <code>t</code> - дата/время в формате epoch в наносекундах;<br> <code>level</code> - уровень логирования;<br> <code>msg</code> - сообщение;<br> <code>mt</code> - записи меньше этого времени уже сохранены в базу данных, его необходимо использовать для запроса истории (есть только в снапшоте);<br> <code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления:</em><br>
формат сообщения такой же, как у снапшота, приходят новые логи (обновлений по старым логам на бывает).</p> <h3 id="_10-1-8-подписка-на-таблицу-активных-заявок"><a href="#_10-1-8-подписка-на-таблицу-активных-заявок" class="header-anchor">#</a> <strong>10.1.8. Подписка на таблицу активных заявок</strong></h3> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;orders&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;orders&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;orders&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span>null<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;orders&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота или список id-роботов (не более 20-ти штук) или null (т.е. все роботы);<br> <code>name</code> - имя портфеля или список имен портфелей (не более 20-ти штук) или null (т.е. все портфели).</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;10&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;orders&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;orders&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1_28034992&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">28034992</span><span class="token punctuation">,</span> <span class="token string">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;p&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;q&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;q0&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dec&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;st&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;12&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;orders&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;11&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;orders&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1649149156056958464</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление;<br> <code>id</code> - уникальный внутренний идентификатор заявки робота;<br> <code>owner</code> - &quot;хозяин&quot; портфеля;<br> <code>sk</code> - ключ бумаги;<br> <code>ono</code> - ext_id или номер заявки;<br> <code>p</code> - цена;<br> <code>q</code> - количество;<br> <code>q0</code> - остаток;<br> <code>d</code> - направление (BUY = 1, SELL = 2);<br> <code>dec</code> - знаков после запятой;<br> <code>st</code> - статус (FREE = 0, ADDING = 1, DELETING = 4, FIRST_DELETING = 5, SL_DELETING = 6, MOVING = 7, ADD_ERROR = 99).</p> <p><em>Обновления (приходит только id робота и обновившиеся заявки, все поля заявок):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;orders&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;1_28034992&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">28034992</span><span class="token punctuation">,</span> <span class="token string">&quot;owner&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BNF_BTCUSDT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;p&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;q&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;q0&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dec&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;st&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1649149157289575424</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h3 id="_10-1-9-админские-подписки"><a href="#_10-1-9-админские-подписки" class="header-anchor">#</a> <strong>10.1.9. &quot;Админские&quot; подписки</strong></h3> <p><em>Подписка:</em><br>
подписка на сервера: <code>{&quot;type&quot;:&quot;subscribe&quot;,&quot;clOrdId&quot;:&quot;1&quot;,&quot;data&quot;:{&quot;topic&quot;:&quot;srvs&quot;}}</code><br>
подписка на внутренние статусы системы: <code>{&quot;type&quot;:&quot;subscribe&quot;,&quot;clOrdId&quot;:&quot;1&quot;,&quot;data&quot;:{&quot;topic&quot;:&quot;state&quot;}}</code><br> <code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах.</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;srvs&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;spb_feed_3&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;spb_feed_3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ubuntu2004&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ips&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;blds&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;rtsfeedtests.ubuntu2004.test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsfeedui.ubuntu2004.ui&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.fix_srv_delay&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.fix_srv_realtime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.indexes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.rtsboard&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.spb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.udp_inc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.udp_snp&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;st&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;rbts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;10&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;cpus&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;ips&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;ps&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1649765885238300672</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;state&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;admin_ws&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1649765885238300672</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление;<br> <code>admin_ws</code> - статус подключенности админского модуля (CLOSED = 0, OPENING = 1, ONLINE = 2, UNKNOWN = 3);<br> <code>srvs</code> - сервера;<br> <code>blds</code> - сборки;<br> <code>st</code> - статус подключенности сервера (CLOSED = 0, OPENING = 1, ONLINE = 2, UNKNOWN = 3) ps - статус запущенности робота (STOPPED = 0, ACTIVE = 2, UNKNOWN = 3).</p> <p><em>Обновления (приходят все поля обновившегося сервера):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;srvs&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;spb_feed_3&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;spb_feed_3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ubuntu2004&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ips&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;194.247.151.36&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;blds&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;rtsfeedtests.ubuntu2004.test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsfeedui.ubuntu2004.ui&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.fix_srv_delay&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.fix_srv_realtime&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.indexes&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.rtsboard&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.spb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.udp_inc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rtsunifiedfeed.ubuntu2004.udp_snp&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;st&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;rbts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;10&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;cpus&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;ips&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;ps&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span>false<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1649765885238300672</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;state&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;admin_ws&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1649765885238300672</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h3 id="_10-1-10-уровни-логирования"><a href="#_10-1-10-уровни-логирования" class="header-anchor">#</a> <strong>10.1.10. Уровни логирования</strong></h3> <p>LEVEL_DEBUG = 0 (обычно, запись пользовательских редактирований робота);<br>
LEVEL_INFO = 1;<br>
LEVEL_WARNING = 2;<br>
LEVEL_ERROR = 3 (это ошибка выставления/снятия заявки, всегда пишется из алгоритма);<br>
LEVEL_CRITICAL = 4 (в робота пришли &quot;кривые&quot; JSON данные или операция недоступна или закончился ключ);<br>
LEVEL_ORDER = 5 (это ошибка выставления заявки с выключением торговли, ходит в телеграм);<br>
LEVEL_NOTIFICATION = 7 (уведомления из алгоритма, ходит в телеграм);<br>
LEVEL_SHOW_OK = 10 (всегда всплывает сообщение);<br>
LEVEL_SHOW_ERR = 11 (всегда всплывает сообщение);<br>
LEVEL_SHOW_WARN = 12 (всегда всплывает сообщение).</p> <h3 id="_10-1-11-отписка"><a href="#_10-1-11-отписка" class="header-anchor">#</a> <strong>10.1.11. Отписка</strong></h3> <p>Для отписки нужно то же самое сообщение, что и при подписке, но с <code>type</code> равным <code>unsubscribe</code>. Либо можно закрыть соединение.</p> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;unsubscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;logs&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;last_callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>type</code> - всегда <code>last_callback</code>.</p> <h2 id="_10-2-запросы"><a href="#_10-2-запросы" class="header-anchor">#</a> <strong>10.2. Запросы</strong></h2> <h3 id="_10-2-1-операции-над-всеми-портфелями-робота"><a href="#_10-2-1-операции-над-всеми-портфелями-робота" class="header-anchor">#</a> <strong>10.2.1. Операции над всеми портфелями робота</strong></h3> <p><em>Запрос:</em>
обнулить позиции всех активных портфелей: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;reset_poses&quot;, &quot;robot_id&quot;:&quot;1&quot;},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
сбросить статусы всех заявок всех портфелей: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;reset_orders&quot;, &quot;robot_id&quot;:&quot;1&quot;},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
попытаться выравнять позиции всех активных портфелей: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;to_market_all&quot;, &quot;robot_id&quot;:&quot;1&quot;},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
выключить торговлю всех портфелей в базе данных: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;stop_trading_db&quot;, &quot;robot_id&quot;:&quot;1&quot;},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
включить торговлю всех портфелей в базе данных: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;start_trading_db&quot;, &quot;robot_id&quot;:&quot;1&quot;},&quot;clOrdId&quot;:&quot;1&quot;}</code></p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-2-2-переподключить-все-маркет-дата-транзакционные-подключения-робота"><a href="#_10-2-2-переподключить-все-маркет-дата-транзакционные-подключения-робота" class="header-anchor">#</a> <strong>10.2.2. Переподключить все маркет-дата/транзакционные подключения робота</strong></h3> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;reconnect_d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;reconnect_t&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>Ответ не предусмотрен.</p> <h3 id="_10-2-3-получить-список-торговых-инструментов-доступных-в-роботе"><a href="#_10-2-3-получить-список-торговых-инструментов-доступных-в-роботе" class="header-anchor">#</a> <strong>10.2.3. Получить список торговых инструментов доступных в роботе</strong></h3> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;get_contracts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;contracts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;VT_BTC&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VT_BTC&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>put</code> - пут/кол/другой (CALL = 0, PUT = 1, OTHER = -1);<br> <code>step</code> -;<br> <code>sec_key</code> -;<br> <code>sec_key_subscr</code> -;<br> <code>base_sec_key</code> -;<br> <code>sec_board</code> -;<br> <code>sec_code</code> -;<br> <code>description</code> -;<br> <code>sec_type</code> -;<br> <code>d_pg</code> -;<br> <code>isinid_fast</code> -;<br> <code>isinid_p2</code> -;<br> <code>state</code> -;<br> <code>exec_end</code> -;<br> <code>strike</code> -;<br> <code>lot_size</code> -.</p> <h3 id="_10-2-4-операции-над-подключениями"><a href="#_10-2-4-операции-над-подключениями" class="header-anchor">#</a> <strong>10.2.4. Операции над подключениями</strong></h3> <p><em>Запрос:</em></p> <p>отключить маркет-дата подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;disable_conn&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;binancefut_listen&quot;, &quot;sec_type&quot;:34359738368},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
включить маркет-дата подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;enable_conn&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;binancefut_listen&quot;, &quot;sec_type&quot;:34359738368},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
отключить транзакционное подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;disable_trans_conn&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
включить транзакционное подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;enable_trans_conn&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
переподключить маркет-дата подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;reconnect_data&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;binancefut_listen&quot;, &quot;sec_type&quot;:34359738368},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
переподключить транзакционное подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;reconnect_trans&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
удалить транзакционное подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;del_trans&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
проверить используется ли в роботе транзакционное подключение: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;is_used_trans&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
удалить транзакционное подключение из базы данных: <code>{&quot;type&quot;: &quot;del_conn_db&quot;, &quot;data&quot;: {&quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
добавить транзакционное подключение (можно только с сайта): <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;:{&quot;robot_id&quot;:1, &quot;action&quot;: &quot;add_trans&quot;, &quot;sec_type&quot;:34359738368, &quot;name&quot;: &quot;test&quot;, &quot;ckey&quot;: &quot;&quot;, &quot;orig&quot;: &quot;encoded_params_string&quot;,&quot;settings&quot;:{},&quot;defaults&quot;:{}}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
редактировать транзакционное подключение (можно только с сайта): <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;:{&quot;robot_id&quot;:1, &quot;action&quot;: &quot;edit_trans&quot;, &quot;sec_type&quot;:34359738368, &quot;name&quot;: &quot;test&quot;, &quot;ckey&quot;: &quot;&quot;, &quot;orig&quot;: &quot;encoded_params_string&quot;,&quot;settings&quot;:{},&quot;defaults&quot;:{}}, &quot;clOrdId&quot;: &quot;1&quot;}</code>.</p> <p><code>robot_id</code> - id-робота;<br> <code>sec_type</code> - тип подключения;<br> <code>name</code> - имя подключения;<br> <code>c_key</code> - закодированная часть ключа подключения;<br> <code>orig</code> - переведенный в строку и сжатый словарь изначально настроенных пользователем параметров (нужен для редактирования подключения);<br> <code>settings</code> - словарь настраиваемых пользователем параметров подключения;<br> <code>defaults</code> - словарь неизменяемых параметров подключения.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;used&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-2-5-редактирование-использование-подключении"><a href="#_10-2-5-редактирование-использование-подключении" class="header-anchor">#</a> <strong>10.2.5. Редактирование/использование подключений</strong></h3> <p><em>Запрос:</em></p> <p>задать позицию по бумаге: <code>{&quot;type&quot;: &quot;set_sec_pos&quot;, &quot;data&quot;: {&quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368, &quot;key_subscr&quot;:&quot;BTCUSD&quot;, &quot;f_name&quot;:&quot;pos&quot;, &quot;f_value&quot;:0},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
задать позицию по валюте: <code>{&quot;type&quot;: &quot;set_coin_pos&quot;, &quot;data&quot;: {&quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368, &quot;coin&quot;:&quot;BTC&quot;, &quot;f_name&quot;:&quot;pos&quot;, &quot;f_value&quot;:0},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
выставить заявку: <code>{&quot;type&quot;: &quot;place_order&quot;, &quot;data&quot;: {&quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368, &quot;key_subscr&quot;:&quot;BTCUSD&quot;, &quot;dir&quot;: 1, &quot;amount&quot;: 1, &quot;price&quot;: 100, &quot;oc&quot;: 1, &quot;cc&quot;: &quot;client_code&quot;},&quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
снять заявку: <code>{&quot;type&quot;: &quot;cancel_order&quot;, &quot;data&quot;: {&quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;, &quot;sec_type&quot;:34359738368, &quot;key_subscr&quot;:&quot;BTCUSD&quot;, &quot;d&quot;: 1, &quot;cc&quot;: &quot;client_code&quot;, &quot;ono&quot;: &quot;1&quot;, &quot;cl_ord_id&quot;: &quot;2&quot;},&quot;clOrdId&quot;:&quot;1&quot;}</code>.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-2-6-операции-над-портфелями"><a href="#_10-2-6-операции-над-портфелями" class="header-anchor">#</a> <strong>10.2.6. Операции над портфелями</strong></h3> <p><em>Запрос:</em></p> <p>попытаться выравнять позицию: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;market&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
выключить всю торговлю и снять заявки: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;hard_stop&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
в режим &quot;к нулю&quot;: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;to0&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
сбросить статусы заявок: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;reset_statuses&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
выключить все формулы: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;formulas_stop&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
включить все формулы: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;formulas_start&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
удалить портфель: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;del_portfolio&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
отключить портфель: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;enable&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
включить портфель: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;disable&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
включить торговлю: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;start&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
выключить торговлю: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;stop&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
удалить бумагу: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;del_sec&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
купить портфель: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;buy&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;, &quot;amount&quot;: 1}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
продать портфель: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;sell&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;, &quot;amount&quot;: 1}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
выставить заявку: <code>{&quot;type&quot;: &quot;action&quot;, &quot;data&quot;: {&quot;action&quot;:&quot;order&quot;, &quot;robot_id&quot;:&quot;1&quot;, &quot;params&quot;:{&quot;name&quot;: &quot;test&quot;, &quot;amount&quot;: 1, &quot;price&quot;: 10, &quot;dir&quot;:1, &quot;key&quot;: &quot;VT_BTCUSD&quot;}}, &quot;clOrdId&quot;:&quot;1&quot;}</code>;<br>
отключить портфель в базе данных: <code>{&quot;type&quot;: &quot;disable_portf_db&quot;, &quot;data&quot;: {&quot;robot_id&quot;:&quot;1&quot;, &quot;name&quot;:&quot;trade&quot;}, &quot;clOrdId&quot;:&quot;1&quot;}</code>.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-2-7-запрос-истории"><a href="#_10-2-7-запрос-истории" class="header-anchor">#</a> <strong>10.2.7. Запрос истории</strong></h3> <p><em>Запрос:</em></p> <p>запрос истории логов (хранится не более 5000 записей для каждого робота): <code>{&quot;type&quot;:&quot;g_log&quot;, &quot;data&quot;:{&quot;msg&quot;:&quot;*Comp*&quot;, &quot;levels&quot;:[1,2], &quot;r_ids&quot;:[1,123,&quot;132&quot;], &quot;lim&quot;:100, &quot;mt&quot;:2000000000000000000}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
запрос истории сделок: <code>(&quot;виртуальных&quot; сделок хранится не более 5000 для каждого робота): {&quot;type&quot;:&quot;g_deal&quot;, &quot;data&quot;:{&quot;r_ids&quot;:[1,123,&quot;132&quot;], &quot;names&quot;:[&quot;test&quot;], &quot;cns&quot;:[&quot;virtual&quot;], &quot;dir&quot;:1, &quot;lim&quot;:100, &quot;mt&quot;:2000000000000000000}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
запрос истории &quot;раздвижек&quot; (&quot;виртуальных&quot; &quot;раздвижек&quot; хранится не более 5000 для каждого робота): <code>{&quot;type&quot;:&quot;g_trade&quot;, &quot;data&quot;:{&quot;r_ids&quot;:[1,123,&quot;132&quot;], &quot;names&quot;:[&quot;test&quot;], &quot;virt&quot;:false, &quot;dir&quot;:1, &quot;lim&quot;:100, &quot;mt&quot;:2000000000000000000}, &quot;clOrdId&quot;: &quot;1&quot;}</code>.</p> <p><code>lim</code> - максимальное количество записей в ответе (для минимального знаения времени может прийти несколько записей и в итоге записей будет больше, чем lim);<br> <code>mt</code> - макисимально время, которое включать в результирующий список;<br> <code>r_ids</code> - id роботов для фильтра;<br> <code>levels</code> - уровни логирования для фильтра;<br> <code>msg</code> - маска сообщения для фильтра;<br> <code>names</code> - имена потрфелей для фильтра;<br> <code>cns</code> - имена подключений для фильтра;<br> <code>dir</code> - направление сделок/&quot;раздвижек&quot; для фильтра (SELL = 1, BUY = 2);<br> <code>virt</code> - витруальные раздвижки для фильтра.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;logs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;r_id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1649926714000983040</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">1649926714000027079</span><span class="token punctuation">,</span> <span class="token string">&quot;level&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Compilation on \&quot;test\&quot; is OK&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;r_id&quot;</span><span class="token operator">:</span><span class="token number">123</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1649849875001278720</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">1649849875000057069</span><span class="token punctuation">,</span> <span class="token string">&quot;level&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Compilation on \&quot;test\&quot; is OK&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1650358372950324480</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;deals&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;r_id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1649849982000027125</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1996989120021058289</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;r_id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1649849981000033594</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">5354657311403049795</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1650373191833740032</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;trades&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;r_id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1649849982000023566</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;virt&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;is_sl&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">8613579682376322901</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;r_id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;dt&quot;</span><span class="token operator">:</span><span class="token number">1649849981000029925</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;virt&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;is_sl&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">217072095785717187</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1650373410468841728</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>r_id</code> - id робота;<br> <code>dt</code> - время сделки/&quot;раздвижки&quot; для сравнения с mt (время бекенда);<br> <code>t</code> - время получения сделки/&quot;раздвижки&quot; роботом;<br> <code>level</code> - уровень логирования;<br> <code>msg</code> - сообщение;<br> <code>name</code> - имя портфеля;<br> <code>cn</code> - имя подключения;<br> <code>sec</code> - имя бумаги;<br> <code>buy_sell</code> - направление (SELL = 1, BUY = 2);<br> <code>decimals</code> - знаков после запятой в цене;<br> <code>ono</code> - уникальный для робота внутренний идентификатор заявки;<br> <code>quantity</code> - количество;<br> <code>price</code> - цена;<br> <code>id</code> - уникальный дял робота внутренний идентификатор записи;<br> <code>virt</code> - витруальная &quot;раздвижка&quot;;<br> <code>tt</code> - сделки раздвижки в текстовом формате;<br> <code>is_sl</code> - переставлена по stop loss.</p> <h3 id="_10-2-8-вычислить-формулу"><a href="#_10-2-8-вычислить-формулу" class="header-anchor">#</a> <strong>10.2.8. Вычислить формулу</strong></h3> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;formula_test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f_title&quot;</span><span class="token operator">:</span><span class="token string">&quot;Test f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;trade_formula&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;code&quot;</span><span class="token operator">:</span><span class="token string">&quot;return 2;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sname&quot;</span><span class="token operator">:</span> null<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;val&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;warn&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-2-9-вычислить-среднюю-раздвижку"><a href="#_10-2-9-вычислить-среднюю-раздвижку" class="header-anchor">#</a> <strong>10.2.9. Вычислить среднюю &quot;раздвижку&quot;</strong></h3> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;calc_avg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;min_dt&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;max_dt&quot;</span><span class="token operator">:</span><span class="token number">2000000000</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;result&quot;</span><span class="token operator">:</span><span class="token string">&quot;ok&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;HTML_TEXT&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1651230829184219136</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;result&quot;</span><span class="token operator">:</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;Can not calculate values&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1651230829184219136</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-2-10-получить-текущие-цены-используемых-бумаг-на-маркет-дата-подключении"><a href="#_10-2-10-получить-текущие-цены-используемых-бумаг-на-маркет-дата-подключении" class="header-anchor">#</a> <strong>10.2.10. Получить текущие цены используемых бумаг на маркет-дата подключении</strong></h3> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;get_subscribed_secs&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;binancefut_listen&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">34359738368</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;contracts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;VT_BTC&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VT_BTC&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>step</code> -;<br> <code>sec_key</code> -;<br> <code>sec_key_subscr</code> -;<br> <code>sec_code</code> -;<br> <code>coin</code> -;<br> <code>bid</code> -;<br> <code>offer</code> -;<br> <code>decimals</code> -;</p> <h3 id="_10-2-11-операции-администратора"><a href="#_10-2-11-операции-администратора" class="header-anchor">#</a> <strong>10.2.11. Операции администратора</strong></h3> <p><em>Запрос:</em></p> <p>получить &quot;следующий&quot; id робота: <code>{&quot;type&quot;: &quot;next_robot_id&quot;, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
получить список пользователей: <code>{&quot;type&quot;: &quot;g_usr&quot;, &quot;data&quot;: {&quot;lim&quot;: 100, &quot;of&quot;: 0, &quot;email&quot;:&quot;xxx&quot;, &quot;pmss&quot;:[1], &quot;srts&quot;: [ [&quot;field1&quot;, &quot;asc&quot;], [&quot;field2&quot;, &quot;desc&quot;], [&quot;field3&quot;, &quot;desc&quot;] ]}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
задать параметр робота: <code>{&quot;type&quot;: &quot;set_robot_field&quot;, &quot;data&quot;: {&quot;robot_id&quot;: &quot;1&quot;, &quot;k&quot;: &quot;label&quot;, &quot;v&quot;: &quot;robot&quot;}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
задать параметр пользователя: <code>{&quot;type&quot;: &quot;e_usr&quot;, &quot;data&quot;: {&quot;email&quot;: &quot;test@gmail.com&quot;, &quot;k&quot;: &quot;pms&quot;, &quot;v&quot;: 9}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
отправить письмо пользователям: <code>{&quot;type&quot;: &quot;send_mail&quot;, &quot;data&quot;: {&quot;robot_id&quot;: &quot;1&quot;, &quot;subj&quot;: &quot;Subject&quot;, &quot;text&quot;: &quot;Text&quot;}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br> <code>{&quot;type&quot;: &quot;send_mail&quot;, &quot;data&quot;: {&quot;robot_id&quot;:[&quot;1&quot;, &quot;2&quot;], &quot;subj&quot;: &quot;Subject&quot;, &quot;text&quot;: &quot;Text&quot;}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
отправить письмо &quot;ответственным&quot;: <code>{&quot;type&quot;: &quot;mail_to&quot;, &quot;data&quot;: {&quot;robot_id&quot;: &quot;1&quot;, &quot;subj&quot;: &quot;Subject&quot;, &quot;text&quot;: &quot;Text&quot;}, &quot;clOrdId&quot;: &quot;1&quot;}</code><br> <code>{&quot;type&quot;: &quot;mail_to&quot;, &quot;data&quot;: {&quot;robot_id&quot;:[&quot;1&quot;, &quot;2&quot;], &quot;subj&quot;: &quot;Subject&quot;, &quot;text&quot;: &quot;Text&quot;}, &quot;clOrdId&quot;: &quot;1&quot;}</code>.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;usrs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;admin@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ct&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;pms&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;tgr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;robots&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1650028809813630464</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test@gmail.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pms&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>email</code> - имя пользователя (для g_usr маска имени);<br> <code>pmss</code> - список прав;<br> <code>srts</code> - список столбцов для сортировки, с указанием имени столбца и порядка сортировки;<br> <code>lim</code> - limit;<br> <code>of</code> - offset;<br> <code>ct</code> - дата регистрации пользователя;<br> <code>pms</code> - права;<br> <code>tgr</code> - телеграм id;<br> <code>robots</code> - список роботов;<br> <code>k</code> - имя ключа;<br> <code>v</code> - значение ключа.</p> <h3 id="_10-2-12-операции-над-роботами"><a href="#_10-2-12-операции-над-роботами" class="header-anchor">#</a> <strong>10.2.12. Операции над роботами</strong></h3> <p><em>Запрос:</em></p> <p>добавить робота (только админ): <code>{&quot;type&quot;: &quot;add_robot&quot;, &quot;data&quot;: {&quot;robot_id&quot;:2, &quot;robot_comment&quot;:&quot;&quot;, &quot;robot_name&quot;:&quot;qwe&quot;, &quot;expiration&quot;:2100000000, &quot;max_trans_count&quot;:4, &quot;log_days&quot;:3, &quot;cpu&quot;:0, &quot;cmd_params&quot;:&quot;&quot;, &quot;robot_type&quot;:&quot;vikingrobot.centos8streamARM.vrb_crpt&quot;, &quot;srv&quot;:&quot;aws_tokyo_d_4&quot;, &quot;ip&quot;:&quot;172.18.29.253&quot;, &quot;mail_to&quot;:&quot;&quot;, &quot;users&quot;:&quot;r.liverovskiy@gmail.com&quot;, &quot;shared&quot;:false, &quot;for_all&quot;:false, &quot;start&quot;:true, &quot;save_hist&quot;:true}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
удалить робота (только админ): <code>{&quot;type&quot;: &quot;del_robot&quot;, &quot;data&quot;: {&quot;robot_id&quot;:2}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
выключить робота: <code>{&quot;type&quot;: &quot;stop_robot&quot;, &quot;data&quot;: {&quot;robot_id&quot;:2}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
включить робота: <code>{&quot;type&quot;: &quot;start_robot&quot;, &quot;data&quot;: {&quot;robot_id&quot;:2}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
перезапустить робота: <code>{&quot;type&quot;: &quot;restart_robot&quot;, &quot;data&quot;: {&quot;robot_id&quot;:2}, &quot;clOrdId&quot;: &quot;1&quot;}</code>.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>robot_id</code> - id робота;<br> <code>robot_comment</code> - комментарий;<br> <code>robot_name</code> - имя (может менять не только админ);<br> <code>expiration</code> - дата окончания лицензии;<br> <code>max_trans_count</code> - лимит транзакционных подключений;<br> <code>log_days</code> - сколько дней хранить логи;<br> <code>cpu</code> - ядро;<br> <code>cmd_params</code> - параметры командной строки для запуска;<br> <code>robot_type</code> - сборка;<br> <code>srv</code> - сервер;<br> <code>ip</code> - ip-адреса (строка через запятую);<br> <code>mail_to</code> - кому слать письма;<br> <code>users</code> - пользователи (строка через запятую);<br> <code>shared</code> - &quot;шареный&quot; робот;<br> <code>for_all</code> - робот доступен всем;<br> <code>start</code> - сразу включить робота;<br> <code>save_hist</code> - сохранять историю сделок в базу данных.</p> <h3 id="_10-2-13-служебные-операции"><a href="#_10-2-13-служебные-операции" class="header-anchor">#</a> <strong>10.2.13. Служебные операции</strong></h3> <p><em>Запрос:</em></p> <p>получить настройки: <code>{&quot;type&quot;: &quot;g_str&quot;, &quot;data&quot;: {&quot;key&quot;:&quot;auth&quot;}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
сохранить настройки: <code>{&quot;type&quot;: &quot;s_str&quot;, &quot;data&quot;: {&quot;key&quot;:&quot;auth&quot;, &quot;val&quot;:&quot;123&quot;}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
разрешить доступ по API: <code>{&quot;type&quot;: &quot;enable_api&quot;, &quot;data&quot;: {&quot;api&quot;: true}, &quot;clOrdId&quot;: &quot;1&quot;}</code>;<br>
создать API ключ: <code>{&quot;type&quot;: &quot;api_key_create&quot;, &quot;data&quot;: {}, &quot;clOrdId&quot;: &quot;1&quot;}</code>.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token operator">:</span><span class="token string">&quot;auth&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;val&quot;</span><span class="token operator">:</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token operator">:</span><span class="token string">&quot;API_KEY&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1646305072249112064</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="_10-2-14-статистика-обработки-тикетов"><a href="#_10-2-14-статистика-обработки-тикетов" class="header-anchor">#</a> <strong>10.2.14. Статистика обработки тикетов</strong></h3> <p><em>Запрос:</em></p> <p>запрос истории новых/открытых тикетов (только админ): <code>{&quot;type&quot;: &quot;g_tickets&quot;, &quot;data&quot;:{&quot;min_d&quot;: &quot;2022-03-28&quot;, &quot;max_d&quot;: &quot;2022-04-27&quot;, &quot;group&quot;:7}, &quot;clOrdId&quot;: &quot;1&quot;}</code>.</p> <p><code>min_d</code> - минимальная дата (включительно) для получения статистики, далее от это даты будут группироваться &quot;пачки&quot; по group дней (для group=7, min_d рекомендуется всегда задавать понедельником);<br> <code>max_d</code> - максимальная дата (НЕ включая) для получения статистики;<br> <code>group</code> - количество дней для группировки статистики.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;tickets&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;test@test.com&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;2022-03-28&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;not_solved&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;2022-04-04&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;not_solved&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;__summary__&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;2022-03-28&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;not_solved&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;created&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;2022-04-04&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;not_solved&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1651059246006788352</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;q0b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p><code>not_solved</code> - не решенных на конец периода группировки;<br> <code>created</code> - новых за данный период группировки;<br> <code>__summary__</code> - суммарные значения.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bot-doc/docs/09-api-v1.html" class="prev">
        9. API
      </a></span> <span class="next"><a href="/bot-doc/docs/11-faq.html">
        11. Часто задаваемые вопросы
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/bot-doc/assets/js/app.26050a84.js" defer></script><script src="/bot-doc/assets/js/3.996009ba.js" defer></script><script src="/bot-doc/assets/js/19.bd3febe1.js" defer></script>
  </body>
</html>
