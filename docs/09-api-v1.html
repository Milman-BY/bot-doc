<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>9. API | Документация торговых роботов компании &quot;Викинг&quot;</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <link rel="icon" href="/bot-doc/favicon.ico">
    <meta name="description" content="Руководство пользователя, описание алгоритма и API">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/bot-doc/assets/css/0.styles.11a3ea9e.css" as="style"><link rel="preload" href="/bot-doc/assets/js/app.26050a84.js" as="script"><link rel="preload" href="/bot-doc/assets/js/3.996009ba.js" as="script"><link rel="preload" href="/bot-doc/assets/js/18.0425e1a8.js" as="script"><link rel="prefetch" href="/bot-doc/assets/js/10.a651cd75.js"><link rel="prefetch" href="/bot-doc/assets/js/11.2895fb5b.js"><link rel="prefetch" href="/bot-doc/assets/js/12.1b4d40fd.js"><link rel="prefetch" href="/bot-doc/assets/js/13.ff12f0b5.js"><link rel="prefetch" href="/bot-doc/assets/js/14.68ec2925.js"><link rel="prefetch" href="/bot-doc/assets/js/15.b3c71097.js"><link rel="prefetch" href="/bot-doc/assets/js/16.ccd2af29.js"><link rel="prefetch" href="/bot-doc/assets/js/17.1c8fdc03.js"><link rel="prefetch" href="/bot-doc/assets/js/19.bd3febe1.js"><link rel="prefetch" href="/bot-doc/assets/js/20.fbcc97bb.js"><link rel="prefetch" href="/bot-doc/assets/js/21.e93ebc90.js"><link rel="prefetch" href="/bot-doc/assets/js/4.721771c5.js"><link rel="prefetch" href="/bot-doc/assets/js/5.42ce668b.js"><link rel="prefetch" href="/bot-doc/assets/js/6.ee10006d.js"><link rel="prefetch" href="/bot-doc/assets/js/7.405437f7.js"><link rel="prefetch" href="/bot-doc/assets/js/8.149a5778.js"><link rel="prefetch" href="/bot-doc/assets/js/9.88feb439.js"><link rel="prefetch" href="/bot-doc/assets/js/vendors~docsearch.c566cd26.js">
    <link rel="stylesheet" href="/bot-doc/assets/css/0.styles.11a3ea9e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bot-doc/" class="home-link router-link-active"><img src="/bot-doc/images/vkg_logo.svg" alt="Документация торговых роботов компании &quot;Викинг&quot;" class="logo"> <span class="site-name can-hide">Документация торговых роботов компании &quot;Викинг&quot;</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bot-doc/docs/" class="nav-link router-link-active">
  Документация
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bot-doc/docs/" class="nav-link router-link-active">
  Документация
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bot-doc/docs/01-change-history.html" class="sidebar-link">1. История изменений</a></li><li><a href="/bot-doc/docs/02-introduction.html" class="sidebar-link">2. Введение</a></li><li><a href="/bot-doc/docs/03-getting-started.html" class="sidebar-link">3. Начало работы</a></li><li><a href="/bot-doc/docs/04-creating-connection.html" class="sidebar-link">4. Добавление подключений</a></li><li><a href="/bot-doc/docs/05-params-description.html" class="sidebar-link">5. Описание параметров</a></li><li><a href="/bot-doc/docs/06-algorithm-comments.html" class="sidebar-link">6. Примечания к алгоритму</a></li><li><a href="/bot-doc/docs/07-order-error.html" class="sidebar-link">7. Ошибки заявок</a></li><li><a href="/bot-doc/docs/08-c-api.html" class="sidebar-link">8. C++</a></li><li><a href="/bot-doc/docs/09-api-v1.html" aria-current="page" class="active sidebar-link">9. API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-1-введение" class="sidebar-link">9.1. Введение</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-2-общие-положения" class="sidebar-link">9.2. Общие положения</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-3-куда-подключаться" class="sidebar-link">9.3. Куда подключаться</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-4-авторизация" class="sidebar-link">9.4. Авторизация</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-5-получить-всех-роботов" class="sidebar-link">9.5. Получить всех роботов</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-6-подписка-на-все-транзакционные-подключения-робота" class="sidebar-link">9.6. Подписка на все транзакционные подключения робота</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-7-подписка-на-конкретное-транзакционное-подключение-робота" class="sidebar-link">9.7. Подписка на конкретное транзакционное подключение робота</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-8-подписка-на-все-портфели-робота" class="sidebar-link">9.8. Подписка на все портфели робота</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-9-подписка-на-конкретныи-портфель-робота" class="sidebar-link">9.9. Подписка на конкретный портфель робота</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-10-изменение-значения-одного-параметра-портфеля" class="sidebar-link">9.10. Изменение значения одного параметра портфеля</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-11-изменение-значения-сразу-нескольких-параметров-портфеля" class="sidebar-link">9.11. Изменение значения сразу нескольких параметров портфеля</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-12-изменение-значения-сразу-нескольких-параметров-бумаги-портфеля" class="sidebar-link">9.12. Изменение значения сразу нескольких параметров бумаги портфеля</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-13-добавление-удаление-бумаг-портфеля" class="sidebar-link">9.13. Добавление/удаление бумаг портфеля</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-14-удаление-портфеля" class="sidebar-link">9.14. Удаление портфеля</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-15-подписка-на-таблицу-финансовых-результатов-раздвижки" class="sidebar-link">9.15. Подписка на таблицу финансовых результатов (раздвижки)</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-16-подписка-на-таблицу-всех-сделок" class="sidebar-link">9.16. Подписка на таблицу всех сделок</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-17-получение-исторических-сделок" class="sidebar-link">9.17. Получение исторических сделок</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-18-включить-выключить-все-формулы-портфеля-портфелеи" class="sidebar-link">9.18. Включить/выключить все формулы портфеля/портфелей</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-19-отписка" class="sidebar-link">9.19. Отписка</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-20-отправка-нескольких-сообщении-однои-пачкои" class="sidebar-link">9.20. Отправка нескольких сообщений одной &quot;пачкой&quot;</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-21-словарь-пользовательских-параметров" class="sidebar-link">9.21. Словарь пользовательских параметров</a></li><li class="sidebar-sub-header"><a href="/bot-doc/docs/09-api-v1.html#_9-22-список-sec-type" class="sidebar-link">9.22. Список sec_type</a></li></ul></li><li><a href="/bot-doc/docs/10-api-v2.html" class="sidebar-link">10. API v2</a></li><li><a href="/bot-doc/docs/11-faq.html" class="sidebar-link">11. Часто задаваемые вопросы</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_9-api"><a href="#_9-api" class="header-anchor">#</a> <strong>9. API</strong></h1> <h2 id="_9-1-введение"><a href="#_9-1-введение" class="header-anchor">#</a> <strong>9.1. Введение</strong></h2> <p>Кроме использования стандартного web-интерфейса для управления своими роботами предусмотрен доступ с помощью WebScoket API, используются текстовые сообщения в формате JSON. Такой вариант подходит для разработки собственного графического интерфейса управления роботами, а так же для сбора статистики.</p> <h2 id="_9-2-общие-положения"><a href="#_9-2-общие-положения" class="header-anchor">#</a> <strong>9.2. Общие положения</strong></h2> <p>Первым делом вы должны отправить сообщение с авторизацией. Если авторизация успешна - то можете дальше слать другие доступные сообщения, если не успешна - сервер закроет соединение.</p> <p>Все сообщения, которые вы получаете, содержат поле ts - это время отправки сообщения в наносекундах в формате epoch.</p> <p>Каждые 30 секунд сервер отправляет PING сообщение клиенту, если в течение 15-ти секунд сервер не получит от клиента PONG или любое другое сообщение, свзяь будет разорвана.</p> <p>Максимальный допустимый размер входящего сообщения составляет 4МБ, при превышении данного лимита свзяь будет разорвана.</p> <p>Вы можете отправить не более 20-ти сообщений в секунду, при превышении лимита связь будет разорвана.</p> <h2 id="_9-3-куда-подключаться"><a href="#_9-3-куда-подключаться" class="header-anchor">#</a> <strong>9.3. Куда подключаться</strong></h2> <p>Подключение по WebSocket, адрес wss://bot.fkviking.com/ws</p> <h2 id="_9-4-авторизация"><a href="#_9-4-авторизация" class="header-anchor">#</a> <strong>9.4. Авторизация</strong></h2> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;authorization_key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;key&quot;</span><span class="token operator">:</span><span class="token string">&quot;API_KEY&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;YOUR_EMAIL&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>key</code> - API ключ пользователя;<br> <code>email</code> - адрес электронной почты пользователя.</p> <p><em>Ответ при успешной авторизации:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;authorization&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;code&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Пример ошибки авторизации:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Wrong email&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="_9-5-получить-всех-роботов"><a href="#_9-5-получить-всех-роботов" class="header-anchor">#</a> <strong>9.5. Получить всех роботов</strong></h2> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;get_robots&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет в ответе.</p> <p><em>Ответ:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;robots&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p>В атрибуте robots будут все id роботов пользователя.</p> <h2 id="_9-6-подписка-на-все-транзакционные-подключения-робота"><a href="#_9-6-подписка-на-все-транзакционные-подключения-робота" class="header-anchor">#</a> <strong>9.6. Подписка на все транзакционные подключения робота</strong></h2> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trans_conns&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота.</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trans_cnt&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;counter&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;use_in_mc&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;sec_pos&quot;</span><span class="token operator">:</span> null<span class="token punctuation">,</span> <span class="token string">&quot;coin_pos&quot;</span><span class="token operator">:</span> null<span class="token punctuation">,</span> <span class="token string">&quot;speed_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;m0&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m05&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m1&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m4&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m8&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m16&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05a&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05d&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05m&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05ra&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;stream_state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;TRANS&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">268435456</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cryptofacilities_send_1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trans_cnt&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;counter&quot;</span><span class="token operator">:</span> <span class="token number">134</span><span class="token punctuation">,</span> <span class="token string">&quot;use_in_mc&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;sec_pos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;coin_pos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;f-eth:usd&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">8.8378071097</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;f-xbt:usd&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">4.8869037592</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;f-xrp:xbt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">1.7e-09</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;speed_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;m0&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m05&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m1&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m4&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m8&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m16&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05a&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05d&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05m&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05ra&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;stream_state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Extra&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Margin&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Positions&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Socket&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Trades&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления (приходит только ключ и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">268435456</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cryptofacilities_send_1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;coin_pos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;f-xbt:usd&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">4.8869037444</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">268435456</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cryptofacilities_send_1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;speed_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;m0&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m05&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m1&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m2&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m4&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m8&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m16&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;l05a&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05d&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05m&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05ra&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;avg&quot;</span><span class="token operator">:</span> <span class="token number">348292</span><span class="token punctuation">,</span> <span class="token string">&quot;avga&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;avgd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;avgm&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;avgra&quot;</span><span class="token operator">:</span> <span class="token number">348292</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h2 id="_9-7-подписка-на-конкретное-транзакционное-подключение-робота"><a href="#_9-7-подписка-на-конкретное-транзакционное-подключение-робота" class="header-anchor">#</a> <strong>9.7. Подписка на конкретное транзакционное подключение робота</strong></h2> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trans_conns&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">268435456</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота;<br> <code>name</code> - имя подключения;<br> <code>sec_type</code> - тип подключения (список ниже).</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">268435456</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cryptofacilities_send_1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trans_cnt&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;counter&quot;</span><span class="token operator">:</span> <span class="token number">143</span><span class="token punctuation">,</span> <span class="token string">&quot;use_in_mc&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;sec_pos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;coin_pos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;f-eth:usd&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">8.8378071097</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;f-xbt:usd&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">4.8869015889</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;f-xrp:xbt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">1.7e-09</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;speed_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;m0&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m05&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m1&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m4&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m8&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m16&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05a&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05d&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05m&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05ra&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;stream_state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;Extra&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Margin&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Orders&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Positions&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Socket&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;Trades&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления (приходит только ключ и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">268435456</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cryptofacilities_send_1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;coin_pos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;f-xbt:usd&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token number">4.8869015743</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;trans_conns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">268435456</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;full_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cryptofacilities_send_1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;speed_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;m0&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m05&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m1&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m2&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m4&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m8&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;m16&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;l05a&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05d&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05m&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;l05ra&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;avg&quot;</span><span class="token operator">:</span> <span class="token number">348292</span><span class="token punctuation">,</span> <span class="token string">&quot;avga&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;avgd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;avgm&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;avgra&quot;</span><span class="token operator">:</span> <span class="token number">348292</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h2 id="_9-8-подписка-на-все-портфели-робота"><a href="#_9-8-подписка-на-все-портфели-робота" class="header-anchor">#</a> <strong>9.8. Подписка на все портфели робота</strong></h2> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolios&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота.</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;qwe&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;_buy_time&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_time&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_val&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_count&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_delta&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_b_time&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_time&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_max_running_percent&quot;</span><span class="token operator">:</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_time&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_sell_time&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;cur_day_month&quot;</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;hedge_after&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;log_level&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;max_not_hedged&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio_num&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;price_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;return_first&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">&quot;sell_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;timer&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;type_trade&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_v&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;mkt_volume&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;move_limits1_date&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;overlay&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;v_in_l&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_in_r&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_max&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_min&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_out_l&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_out_r&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;btnBuy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;btnMarket&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;btnSell&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#FFFFFF&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field1_&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field2_&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sell_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trade_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;S[&quot;</span>CEX_BTC_USD'<span class="token string">&quot;].bid;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trading_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;can trade&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_v&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_abs&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_b_val&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_val&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_sell_v&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_portfolios&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;buy&quot;</span><span class="token operator">:</span> <span class="token number">11354</span><span class="token punctuation">,</span> <span class="token string">&quot;delta&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field1&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res&quot;</span><span class="token operator">:</span> <span class="token number">210.7</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res_wo_c&quot;</span><span class="token operator">:</span> <span class="token number">210.7</span><span class="token punctuation">,</span> <span class="token string">&quot;first_delta&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k1&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;lim_b&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;lim_s&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;opened&quot;</span><span class="token operator">:</span> <span class="token number">11564.7</span><span class="token punctuation">,</span> <span class="token string">&quot;opened_comission&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;percent&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;price_b&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;price_check&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;price_s&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;sell&quot;</span><span class="token operator">:</span> <span class="token number">11329.2</span><span class="token punctuation">,</span> <span class="token string">&quot;tp&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_freq_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_max_running_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_pos_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_sell_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;always_limits_timer&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;custom_trade&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;equal_prices&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;ext_formulas&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;in_formulas&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;is_fin_res_wo_c&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;quote&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;re_buy&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;re_sell&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;simply_first&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;to0&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;tt_only_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;use_tt&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;virtual_0_pos&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;comission_sign&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;count_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;depth_ob&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;leverage&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ob_c_p_t&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ob_t_p_t&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;on_buy&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;put&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_sign&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;timer&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;ban_period&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;max_trans_musec&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">2147483648</span><span class="token punctuation">,</span> <span class="token string">&quot;client_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;count_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_b_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_s_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_board&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC-USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key_subscr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC-USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comission&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;d_pg&quot;</span><span class="token operator">:</span> <span class="token number">2147483647</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res_mult&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;k&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k_sl&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m_s&quot;</span><span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token string">&quot;mc_level_close&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;mc_level_to0&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;percent_of_quantity&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;sl&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;tp&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;is_first&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;maker&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;move_limits&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;move_limits1&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;sle&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;te&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;timetable&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;is_trading&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления (приходит только ключ, это имя портфеля и бумаги, и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;qwe&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sell&quot;</span><span class="token operator">:</span> <span class="token number">11322.5</span><span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pos&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h2 id="_9-9-подписка-на-конкретныи-портфель-робота"><a href="#_9-9-подписка-на-конкретныи-портфель-робота" class="header-anchor">#</a> <strong>9.9. Подписка на конкретный портфель робота</strong></h2> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolios&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота;<br> <code>name</code> - имя портфеля.</p> <p><em>Ответ (снапшот):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;qwe&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;_buy_time&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_time&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_val&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_count&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_delta&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_freq_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_b_time&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_time&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_max_running_percent&quot;</span><span class="token operator">:</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_time&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_sell_time&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;cur_day_month&quot;</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;hedge_after&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;log_level&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;max_not_hedged&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio_num&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;price_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;return_first&quot;</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">&quot;sell_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;timer&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;type_trade&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_v&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;mkt_volume&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;move_limits1_date&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;overlay&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;v_in_l&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_in_r&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_max&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_min&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_out_l&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;v_out_r&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;btnBuy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;btnMarket&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;btnSell&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#FFFFFF&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field1_&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field2_&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sell_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trade_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;S[&quot;</span>CEX_BTC_USD'<span class="token string">&quot;].bid;return 0;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;trading_tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;can trade&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_v&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_abs&quot;</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_b_val&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_val&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_sell_v&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_portfolios&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;buy&quot;</span><span class="token operator">:</span> <span class="token number">11354</span><span class="token punctuation">,</span> <span class="token string">&quot;delta&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field1&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ext_field2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res&quot;</span><span class="token operator">:</span> <span class="token number">210.7</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res_wo_c&quot;</span><span class="token operator">:</span> <span class="token number">210.7</span><span class="token punctuation">,</span> <span class="token string">&quot;first_delta&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k1&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k2&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;lim_b&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;lim_s&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;opened&quot;</span><span class="token operator">:</span> <span class="token number">11564.7</span><span class="token punctuation">,</span> <span class="token string">&quot;opened_comission&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;percent&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;price_b&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;price_check&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;price_s&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;sell&quot;</span><span class="token operator">:</span> <span class="token number">11329.2</span><span class="token punctuation">,</span> <span class="token string">&quot;tp&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_freq_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_max_running_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_pos_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_sell_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_en&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;always_limits_timer&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;custom_trade&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;disabled&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;equal_prices&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;ext_formulas&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;in_formulas&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;is_fin_res_wo_c&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;quote&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;re_buy&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;re_sell&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;simply_first&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;to0&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;tt_only_stop&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;use_tt&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;virtual_0_pos&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;all_free&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;comission_sign&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;count_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;depth_ob&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;leverage&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ob_c_p_t&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ob_t_p_t&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;on_buy&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;put&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_sign&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;timer&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;ban_period&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;max_trans_musec&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;pos&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span> <span class="token number">2147483648</span><span class="token punctuation">,</span> <span class="token string">&quot;client_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;virtual&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;count_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_b_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_s_formula&quot;</span><span class="token operator">:</span> <span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_board&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC-USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key_subscr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BTC-USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;comission&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;d_pg&quot;</span><span class="token operator">:</span> <span class="token number">2147483647</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res_mult&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;k&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;k_sl&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;m_s&quot;</span><span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token string">&quot;mc_level_close&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;mc_level_to0&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;percent_of_quantity&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;sl&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;tp&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;is_first&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;maker&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;mm&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;move_limits&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;move_limits1&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;sle&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;te&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;timetable&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;is_trading&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления (приходит только ключ, это имя портфеля и бумаги, и то что обновилось):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;qwe&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sell&quot;</span><span class="token operator">:</span> <span class="token number">11325.3</span><span class="token punctuation">,</span> <span class="token string">&quot;buy&quot;</span><span class="token operator">:</span> <span class="token number">11352.5</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res_wo_c&quot;</span><span class="token operator">:</span> <span class="token number">212.2</span><span class="token punctuation">,</span> <span class="token string">&quot;fin_res&quot;</span><span class="token operator">:</span> <span class="token number">212.2</span><span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;pos&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p>формат сообщения такой же, как у снапшота.</p> <h2 id="_9-10-изменение-значения-одного-параметра-портфеля"><a href="#_9-10-изменение-значения-одного-параметра-портфеля" class="header-anchor">#</a> <strong>9.10. Изменение значения одного параметра портфеля</strong></h2> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolio_field&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;f_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;v_in_l&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;f_value&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>f_name</code> - имя параметра;<br> <code>f_value</code> - новое значение параметра.</p> <p><em>Ответ:</em><br>
Ответа на это сообщение не предусмотрено, кроме ответа об ошибке. Но если вы подписаны на обновления по данному портфелю, то получите изменение данного поля:</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;qwe&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;v_in_l&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ошибка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Invalid input value for integer field &quot;</span>v_in_left<span class="token string">&quot;: -1 not in range [1,9007199254740991]&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="_9-11-изменение-значения-сразу-нескольких-параметров-портфеля"><a href="#_9-11-изменение-значения-сразу-нескольких-параметров-портфеля" class="header-anchor">#</a> <strong>9.11. Изменение значения сразу нескольких параметров портфеля</strong></h2> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_en&quot;</span><span class="token operator">:</span>true<span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_time&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_abs&quot;</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_val&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_fin_res_stop&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_s_time&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_val&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_s_stop&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_l_b_time&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_b_val&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_l_b_stop&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_sell_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_sell_time&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_sell_v&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_buy_time&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_buy_v&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;_max_running_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_max_running_percent&quot;</span><span class="token operator">:</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_too_much_n_h_portfolios&quot;</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_en&quot;</span><span class="token operator">:</span>false<span class="token punctuation">,</span> <span class="token string">&quot;_pos_time&quot;</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;_pos_v&quot;</span><span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em><br>
Ответа на это сообщение не предусмотрено, кроме ответа об ошибке (в случае ошибки не применится ничего). Но если вы подписаны на обновления по данному портфелю, то получите изменение всех измененных полей.</p> <p><em>Ошибка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;style&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Error&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Invalid input value for integer field &quot;</span><span class="token function">Time</span> <span class="token punctuation">(</span>sec<span class="token punctuation">)</span><span class="token string">&quot;: -12 not in range [0,86400]&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="_9-12-изменение-значения-сразу-нескольких-параметров-бумаги-портфеля"><a href="#_9-12-изменение-значения-сразу-нескольких-параметров-бумаги-портфеля" class="header-anchor">#</a> <strong>9.12. Изменение значения сразу нескольких параметров бумаги портфеля</strong></h2> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;sec_field&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sname&quot;</span><span class="token operator">:</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;security&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;count_formula&quot;</span><span class="token operator">:</span><span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_b_formula&quot;</span><span class="token operator">:</span><span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ratio_s_formula&quot;</span><span class="token operator">:</span><span class="token string">&quot;return 1;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>sname</code> - SecKey бумаги;<br> <code>security</code> - словарь параметров бумаги и их значений.</p> <p><em>Ответ:</em><br>
Ответа на это сообщение не предусмотрено, кроме ответа об ошибке (в случае ошибки не применится ничего). Но если вы подписаны на обновления по данному портфелю, то получите изменение всех измененных полей.</p> <h2 id="_9-13-добавление-удаление-бумаг-портфеля"><a href="#_9-13-добавление-удаление-бумаг-портфеля" class="header-anchor">#</a> <strong>9.13. Добавление/удаление бумаг портфеля</strong></h2> <p>Чтобы добавить/удалить бумаги из портфеля, нужно прислать имя портфеля и новый список его бумаг, для бумаг указав <code>sec_key</code>, <code>sec_key_subscr</code> и <code>sec_type</code> (вы также можете указать обновляемые параметры любой из бумаг), так же обязательно указать <code>is_first</code> у одной из бумаг.</p> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolio&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;portfolio&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;securities&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;sec_type&quot;</span><span class="token operator">:</span><span class="token number">2147483648</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key&quot;</span><span class="token operator">:</span><span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sec_key_subscr&quot;</span><span class="token operator">:</span><span class="token string">&quot;BTC-USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;is_first&quot;</span><span class="token operator">:</span>true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em><br>
Ответа на это сообщение не предусмотрено, кроме ответа об ошибке (в случае ошибки не применится ничего). Но если вы подписаны на обновления по данному портфелю, то получите изменение всех измененных полей.</p> <h2 id="_9-14-удаление-портфеля"><a href="#_9-14-удаление-портфеля" class="header-anchor">#</a> <strong>9.14. Удаление портфеля</strong></h2> <p>Чтобы удалить портфель/портфели, нужно отправить сообщение вида, описанного ниже (здесь P1, P2 - имена портфелей для удаления).</p> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;vector&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;del_portfolio&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;P1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;del_portfolio&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;P2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em><br>
Ответа на это сообщение не предусмотрено, кроме ответа об ошибке, но если вы подписаны на обновления по данному портфелю, то получите обновление вида:</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;portfolios&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;P1&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;P1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;__action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;del&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> false<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1625041350069746688</span><span class="token punctuation">}</span>
</code></pre></div><h2 id="_9-15-подписка-на-таблицу-финансовых-результатов-раздвижки"><a href="#_9-15-подписка-на-таблицу-финансовых-результатов-раздвижки" class="header-anchor">#</a> <strong>9.15. Подписка на таблицу финансовых результатов (раздвижки)</strong></h2> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;trades&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота.</p> <p><em>Ответ (снапшот, приходят последние 5000 записей):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;trades&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571923847981999080</span><span class="token punctuation">,</span> <span class="token string">&quot;is_sl&quot;</span><span class="token operator">:</span> false<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7468.5</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD: SELL quantity=1, price=7468.5000, oNo=3, at 17:30:47&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">4042437680275238758</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571923836000529003</span><span class="token punctuation">,</span> <span class="token string">&quot;is_sl&quot;</span><span class="token operator">:</span> true<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7476.2</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;tt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD: BUY quantity=1, price=7476.2000, oNo=2, at 17:30:36&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">3389679118170958657</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>trades</code> - список раздвижек;<br> <code>time</code> - дата/время в формате epoch в наносекундах;<br> <code>is_sl</code> - заявки были переставлены по стоп-лосс;<br> <code>buy_sell</code> - направление, 1 - покупка, 2 - продажа;<br> <code>quantity</code> - количество в штуках портфелей (всегда целое);<br> <code>tt</code> - всплывающая подсказка со списком сделок;<br> <code>decimals</code> - сколько знаков после запятой отображать в цене (price)
<code>name</code> - имя портфеля;<br> <code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления:</em><br>
формат сообщения такой же, как у снапшота, приходят новые раздвижки (обновлений по старым раздвижкам не бывает).</p> <h2 id="_9-16-подписка-на-таблицу-всех-сделок"><a href="#_9-16-подписка-на-таблицу-всех-сделок" class="header-anchor">#</a> <strong>9.16. Подписка на таблицу всех сделок</strong></h2> <p><em>Подписка:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;deals&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота.</p> <p><em>Ответ (снапшот, приходят последние 5000 записей):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;deals&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571923847981993828</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7468.5</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">4195816474436969915</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571923836000518880</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7476.2</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">324815817002964722</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571819580259371838</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">5863</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BN_ADABTC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bin1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">4.76e-06</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">10000000000</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3452938594962378336</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>deals</code> - список сделок;<br> <code>time</code> - дата/время в формате epoch в наносекундах;<br> <code>id</code> - уникальный идентификатор записи;<br> <code>ono</code> - номер заявки;<br> <code>buy_sell</code> - направление, 1 - покупка, 2 - продажа;<br> <code>decimals</code> - сколько знаков после запятой отображать в цене (price);<br> <code>sec</code> - уникальный идентификатор бумаги;<br> <code>name</code> - имя портфеля;<br> <code>snapshot</code> - означает снапшот это или обновление.</p> <p><em>Обновления:</em><br>
формат сообщения такой же, как у снапшота, приходят новые сделки (обновлений по старым сделкам на бывает).</p> <h2 id="_9-17-получение-исторических-сделок"><a href="#_9-17-получение-исторических-сделок" class="header-anchor">#</a> <strong>9.17. Получение исторических сделок</strong></h2> <p><em>Запрос:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;deals&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;from&quot;</span><span class="token operator">:</span><span class="token string">&quot;2020/01/01 09:49&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;to&quot;</span><span class="token operator">:</span><span class="token string">&quot;2020/01/02 09:49&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><code>clOrdId</code> - пользовательский идентификатор сообщения, он же придет во всех ответах;<br> <code>robot_id</code> - id-робота;<br> <code>from</code> - дата начала, включительно;<br> <code>to</code> - дата окончания, включительно;<br> <code>name</code> - имя портфеля (если не указано, то по всем портфелям).</p> <p><em>Ответ (приходит не более 10000 записей):</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;callback&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">&quot;deals&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571923847981993828</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7468.5</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">4195816474436969915</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571923836000518880</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CEX_BTC_USD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;qwe2&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">7476.2</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">324815817002964722</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;time&quot;</span><span class="token operator">:</span> <span class="token number">1571819580259371838</span><span class="token punctuation">,</span> <span class="token string">&quot;ono&quot;</span><span class="token operator">:</span> <span class="token number">5863</span><span class="token punctuation">,</span> <span class="token string">&quot;sec&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BN_ADABTC&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bin1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">4.76e-06</span><span class="token punctuation">,</span> <span class="token string">&quot;buy_sell&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;quantity&quot;</span><span class="token operator">:</span> <span class="token number">10000000000</span><span class="token punctuation">,</span> <span class="token string">&quot;decimals&quot;</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">3452938594962378336</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&quot;snapshot&quot;</span><span class="token operator">:</span> true<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;ts&quot;</span><span class="token operator">:</span><span class="token number">1624516437000000123</span><span class="token punctuation">}</span>
</code></pre></div><p><code>deals</code> - список сделок;<br> <code>time</code> - дата/время в формате epoch в наносекундах;<br> <code>id</code> - уникальный идентификатор записи;<br> <code>ono</code> - номер заявки;<br> <code>buy_sell</code> - направление, 1 - покупка, 2 - продажа;<br> <code>decimals</code> - сколько знаков после запятой отображать в цене (price);<br> <code>sec</code> - уникальный идентификатор бумаги;<br> <code>name</code> - имя портфеля;<br> <code>snapshot</code> - означает снапшот это или обновление, всегда true.</p> <h2 id="_9-18-включить-выключить-все-формулы-портфеля-портфелеи"><a href="#_9-18-включить-выключить-все-формулы-портфеля-портфелеи" class="header-anchor">#</a> <strong>9.18. Включить/выключить все формулы портфеля/портфелей</strong></h2> <p><em>Запросы:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;formulas_start&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>включить формулы для заданного портфеля.</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;formulas_stop&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p>выключить формулы для заданного портфеля.</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;vector&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;formulas_start&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;formulas_start&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;p2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p>включить формулы для заданных портфелей.</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;vector&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;formulas_stop&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;formulas_stop&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;p2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p>выключить формулы для заданных портфелей.</p> <p><em>Ответ:</em><br>
Ответа на это сообщение не предусмотрено, кроме ответа об ошибке.</p> <h2 id="_9-19-отписка"><a href="#_9-19-отписка" class="header-anchor">#</a> <strong>9.19. Отписка</strong></h2> <p>Для отписки нужно тоже самое сообщение, что и при подписке, но с <code>type</code> равным <code>unsubscribe</code>. Либо закрыть соединение.</p> <h2 id="_9-20-отправка-нескольких-сообщении-однои-пачкои"><a href="#_9-20-отправка-нескольких-сообщении-однои-пачкои" class="header-anchor">#</a> <strong>9.20. Отправка нескольких сообщений одной &quot;пачкой&quot;</strong></h2> <p>В списке <em>data</em> вы можете указывать любые сообщения, описанные выше.</p> <p><em>Общий вид запроса:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;vector&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Пример запроса:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;vector&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span><span class="token operator">:</span><span class="token string">&quot;formulas_start&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;p1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;subscribe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;clOrdId&quot;</span><span class="token operator">:</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;topic&quot;</span><span class="token operator">:</span><span class="token string">&quot;deals&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em><br>
Вы получите ответы на каждый из запросов из списка data, на который ответ предусмотрен.</p> <h2 id="_9-21-словарь-пользовательских-параметров"><a href="#_9-21-словарь-пользовательских-параметров" class="header-anchor">#</a> <strong>9.21. Словарь пользовательских параметров</strong></h2> <p>Для отправки пользовательских параметров в робот вы можете использовать поле <code>__extra</code>, <code>__extra</code> является словарем, его ключи - строковые представления целых чисел из отрезка [0, 29], значения - дробные числа. Данный словарь может быть использован в C++ интерфейсе через метод портфеля <code>extra()</code>. Для удаления ключа из словаря, необходимо задать его значение равным нулю.</p> <p><em>Пример добавление/обновления по ключу:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolio_field&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;f_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;__extra&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;f_value&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;2&quot;</span><span class="token operator">:</span><span class="token number">12.34</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Пример удаления по ключу:</em></p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token punctuation">{</span><span class="token string">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;portfolio_field&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;robot_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;f_name&quot;</span><span class="token operator">:</span><span class="token string">&quot;__extra&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;f_value&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot;2&quot;</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><em>Ответ:</em><br>
Ответа на это сообщение не предусмотрено, кроме ответа об ошибке. Но если Вы подписаны на обновления по данному портфелю, то получите изменение данного поля, при удалении ключа, вы получите в качестве значения удаляемого ключа {&quot;__action&quot;:&quot;del&quot;}.</p> <h2 id="_9-22-список-sec-type"><a href="#_9-22-список-sec-type" class="header-anchor">#</a> <strong>9.22. Список sec_type</strong></h2> <p>ANY = 0<br>
MOEX_OPT = 1<br>
MOEX_FUT = (1 &lt;&lt; 1)<br>
MOEX_FUT_OPT = (1) + (1 &lt;&lt; 1)<br>
MOEX_FOND = (1 &lt;&lt; 2)<br>
MOEX_CURR = (1 &lt;&lt; 3)<br>
MOEX_FOND_CURR = (1 &lt;&lt; 2) + (1 &lt;&lt; 3)<br>
EXANTE = (1 &lt;&lt; 4)<br>
SPB = (1 &lt;&lt; 5)<br>
KASE = (1 &lt;&lt; 6)<br>
EBS = (1 &lt;&lt; 7)<br>
FEEDOS = (1 &lt;&lt; 8)<br>
CQG = (1 &lt;&lt; 11)<br>
CQG_EXANTE = (1 &lt;&lt; 11) + (1 &lt;&lt; 4)<br>
HUOBIFUTCM = (1 &lt;&lt; 12)<br>
KRAKEN = (1 &lt;&lt; 16)<br>
HUOBIFUTUM = (1 &lt;&lt; 17)<br>
BITFINEX = (1 &lt;&lt; 18)<br>
HITBTC = (1 &lt;&lt; 19)<br>
BITMEX = (1 &lt;&lt; 20)<br>
BINANCEOPT = (1 &lt;&lt; 21)<br>
BINANCE = (1 &lt;&lt; 22)<br>
GDAX = (1 &lt;&lt; 23)<br>
GLOBITEX = (1 &lt;&lt; 24)<br>
DERIBIT = (1 &lt;&lt; 25)<br>
OKEX = (1 &lt;&lt; 26)<br>
BEQUANT = (1 &lt;&lt; 27)<br>
KRAKENFUT = (1 &lt;&lt; 28)<br>
KUCOIN = (1 &lt;&lt; 29)<br>
CEXIO = (1 &lt;&lt; 31)<br>
HUOBI = (1 &lt;&lt; 32)<br>
HBDM = (1 &lt;&lt; 33)<br>
PRIZMBIT = (1 &lt;&lt; 34)<br>
BINANCEFUT = (1 &lt;&lt; 35)<br>
XENA = (1 &lt;&lt; 40)<br>
VIKINGTRADE = (1 &lt;&lt; 41)<br>
BINANCECM = (1 &lt;&lt; 42)</p> <p>где 1 &lt;&lt; N, это 2 в степени N.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bot-doc/docs/08-c-api.html" class="prev">
        8. C++
      </a></span> <span class="next"><a href="/bot-doc/docs/10-api-v2.html">
        10. API v2
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/bot-doc/assets/js/app.26050a84.js" defer></script><script src="/bot-doc/assets/js/3.996009ba.js" defer></script><script src="/bot-doc/assets/js/18.0425e1a8.js" defer></script>
  </body>
</html>
